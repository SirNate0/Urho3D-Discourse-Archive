{"post_stream":{"posts":[{"id":11112,"name":"","username":"elemusic","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/e/919ad9/{size}.png","created_at":"2016-03-17T05:47:26.000Z","cooked":"\u003cp\u003ei have read 34_DynamicGeometry example,trying to learn how to write a custom LineRender with only position and vertex color.\u003cbr\u003e\nsomehow it didn‚Äôt work as expected.\u003cbr\u003e\ni want to draw a triangle with alpha color(1,0,0,0.5f)\u003cbr\u003e\nthe result is some triangle with wrong direction,front to back,guess there maybe some vertex format mistake,i can‚Äôt figure out\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003efloat vertexData[] = {\n\t\t// Position     Color\n\t\t-5, 5, 0,\t\t1,0,0,0.5f,\n\t\t5, 5, 0,\t\t1,0,0,0.5f,\n\t\t-5, -5, 0,\t\t1,0,0,0.5f\n\t};//clock wise\n\n\tconst unsigned short indexData[] = {\n\t\t0, 1, 2\n\t};\n\n\tconst unsigned numVertices = 3;\n\n\tSharedPtr\u0026lt;Model\u0026gt; fromScratchModel(new Model(context_));\n\tSharedPtr\u0026lt;VertexBuffer\u0026gt; vb(new VertexBuffer(context_));\n\tSharedPtr\u0026lt;IndexBuffer\u0026gt; ib(new IndexBuffer(context_));\n\tSharedPtr\u0026lt;Geometry\u0026gt; geom(new Geometry(context_));\n\n\tvb-\u0026gt;SetShadowed(true);\n\tvb-\u0026gt;SetSize(numVertices, MASK_POSITION | MASK_COLOR);\n\tvb-\u0026gt;SetData(vertexData);\n\n\tib-\u0026gt;SetSize(numVertices, false);\n\tib-\u0026gt;SetData(indexData);\n\n\tgeom-\u0026gt;SetVertexBuffer(0, vb, MASK_POSITION | MASK_COLOR);\n\tgeom-\u0026gt;SetIndexBuffer(ib);\n\tgeom-\u0026gt;SetDrawRange(TRIANGLE_LIST, 0, numVertices);\n\n\tfromScratchModel-\u0026gt;SetNumGeometries(1);\n\tfromScratchModel-\u0026gt;SetGeometry(0, 0, geom);\n\n\tNode* node = scene_-\u0026gt;CreateChild(\"FromScratchObject\");\n\tnode-\u0026gt;SetPosition(Vector3(3.0f, 0.0f, 0.0f));\n\n\tStaticModel* sModel = node-\u0026gt;CreateComponent\u0026lt;StaticModel\u0026gt;();\n\tsModel-\u0026gt;SetModel(fromScratchModel);\n\tsModel-\u0026gt;SetMaterial(cache-\u0026gt;GetResource\u0026lt;Material\u0026gt;(\"Materials/MyConstColor.xml\"));\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand here is the MyConstColor.xml,just call BasicVColUnlitAlpha\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u0026lt;material\u0026gt;\n    \u0026lt;technique name=\"Techniques/BasicVColUnlitAlpha.xml\" /\u0026gt;\n\u0026lt;/material\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ethe problem is the color vertex format does not work as expected.\u003c/p\u003e\n\u003cp\u003eif i change for just position,it‚Äôs ok.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003efloat vertexData[] = {\n\t\t// Position\n\t\t-5, 5, 5,\n\t\t5, 5, 5,\n\t\t-5, -5, 5\n\t};\n...\nvb-\u0026gt;SetSize(numVertices, MASK_POSITION);\ngeom-\u0026gt;SetVertexBuffer(0, vb, MASK_POSITION);\n...\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eif i use the 34_DynamicGeometry example with position and nomal,it works as well.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003efloat vertexData[] = {\n            // Position             Normal\n            0.0f, 0.5f, 0.0f,       0.0f, 0.0f, 0.0f,\n            0.5f, -0.5f, 0.5f,      0.0f, 0.0f, 0.0f,\n            0.5f, -0.5f, -0.5f,     0.0f, 0.0f, 0.0f\n}\nvb-\u0026gt;SetSize(numVertices, MASK_POSITION|MASK_NORMAL);\ngeom-\u0026gt;SetVertexBuffer(0, vb, MASK_POSITION | MASK_NORMAL);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf add color,then everything goes wrong‚Ä¶ \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/confused.png?v=5\" title=\":confused:\" class=\"emoji\" alt=\":confused:\"\u003e\u003cbr\u003e\nwhat the problem with color?\u003cbr\u003e\nhow can i make it right?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:11:11.971Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":15,"reads":9,"readers_count":8,"score":76.8,"yours":false,"topic_id":1892,"topic_slug":"geometry-from-scratchmodel-something-wrong-about-mask-color","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":195,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":11116,"name":"","username":"codingmonkey","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","created_at":"2016-03-17T08:06:34.000Z","cooked":"\u003cp\u003eHi, you better looking into code to clarify what is color format in vertex\u003cbr\u003e\nSo open VS studio and Urho3d project, press Ctrl+F - type ‚ÄúCustomGeometry‚Äù and you got this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e/// Custom geometry vertex.\nstruct CustomGeometryVertex\n{\n    /// Position.\n    Vector3 position_;\n    /// Normal.\n    Vector3 normal_;\n    /// Color.\n    unsigned color_;\n    /// Texture coordinates.\n    Vector2 texCoord_;\n    /// Tangent.\n    Vector4 tangent_;\n};\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand then you probably may see this also:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid CustomGeometry::DefineColor(const Color\u0026amp; color)\n{\n    if (vertices_.Size() \u0026lt; geometryIndex_ || vertices_[geometryIndex_].Empty())\n        return;\n\n    vertices_[geometryIndex_].Back().color_ = color.ToUInt();\n    elementMask_ |= MASK_COLOR;\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo use or keep code near with you for seeing struct format and how methods are working.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:11:12.243Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":8,"readers_count":7,"score":1.6,"yours":false,"topic_id":1892,"topic_slug":"geometry-from-scratchmodel-something-wrong-about-mask-color","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":148,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":11200,"name":"","username":"elemusic","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/e/919ad9/{size}.png","created_at":"2016-03-18T02:44:44.000Z","cooked":"\u003cp\u003ethanks codingmonkey,never thought color use unsigned int,now everything go well.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:11:18.058Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":8,"readers_count":7,"score":1.6,"yours":false,"topic_id":1892,"topic_slug":"geometry-from-scratchmodel-something-wrong-about-mask-color","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":195,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[11112,11116,11200]},"timeline_lookup":[[1,2442],[3,2441]],"suggested_topics":[{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7083,"title":"Using custom models in Xamarin.Forms shared project","fancy_title":"Using custom models in Xamarin.Forms shared project","slug":"using-custom-models-in-xamarin-forms-shared-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-03T08:34:21.895Z","last_posted_at":"2021-12-03T11:40:30.983Z","bumped":true,"bumped_at":"2021-12-03T11:40:30.983Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":198,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1493,"username":"Nikolai","name":"Nikolai Miroshnichenko","avatar_template":"/user_avatar/discourse.urho3d.io/nikolai/{size}/3632_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7105,"title":"Multiple Application.UI Roots?","fancy_title":"Multiple Application.UI Roots?","slug":"multiple-application-ui-roots","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/7/74b10ce575f1b69fe43be4abcb07605d74a1d27c_2_1024x544.jpeg","created_at":"2021-12-20T08:55:14.707Z","last_posted_at":"2021-12-22T02:33:05.795Z","bumped":true,"bumped_at":"2021-12-22T02:33:05.795Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":243,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7065,"title":"Angelscript: Loading a char file into a 2D array: how?","fancy_title":"Angelscript: Loading a char file into a 2D array: how?","slug":"angelscript-loading-a-char-file-into-a-2d-array-how","posts_count":7,"reply_count":4,"highest_post_number":7,"image_url":null,"created_at":"2021-11-24T09:20:05.420Z","last_posted_at":"2021-11-28T11:19:39.689Z","bumped":true,"bumped_at":"2021-11-28T11:26:00.375Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":239,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":983,"username":"tarzeron","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ecae2f/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7160,"title":"RayCast trouble","fancy_title":"RayCast trouble","slug":"raycast-trouble","posts_count":17,"reply_count":9,"highest_post_number":19,"image_url":null,"created_at":"2022-01-29T00:06:00.367Z","last_posted_at":"2022-01-30T00:29:39.356Z","bumped":true,"bumped_at":"2022-01-30T00:29:39.356Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":260,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}}]}],"tags_descriptions":{},"id":1892,"title":"Geometry from ScratchModel,something wrong about MASK_COLOR","fancy_title":"Geometry from ScratchModel,something wrong about MASK_COLOR","posts_count":3,"created_at":"2016-03-17T05:47:26.000Z","views":286,"reply_count":0,"like_count":0,"last_posted_at":"2016-03-18T02:44:44.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"geometry-from-scratchmodel-something-wrong-about-mask-color","category_id":10,"word_count":463,"deleted_at":null,"user_id":195,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1892","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":195,"username":"elemusic","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/e/919ad9/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":148,"username":"codingmonkey","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":195,"username":"elemusic","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/e/919ad9/{size}.png"},"last_poster":{"id":195,"username":"elemusic","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/e/919ad9/{size}.png"}}}