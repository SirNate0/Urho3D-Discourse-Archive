{"post_stream":{"posts":[{"id":19981,"name":"Xenodora","username":"xenodora","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/x/f9ae1b/{size}.png","created_at":"2017-08-08T13:40:49.850Z","cooked":"\u003cp\u003eI‚Äôve been messing around with soft bodies physics using the code from this thread: \u003ca href=\"https://discourse.urho3d.io/t/bullets-softbody-physics-example/1319\"\u003eBullet‚Äôs SoftBody physics example\u003c/a\u003e , and have been able to get the jello mushroom working.\u003c/p\u003e\n\u003cp\u003eAfter doing this I started work on doing partial model soft body so that things like hair can be done. To achieve this, I found I need to be able to get the vertex weight values from weight groups, so that vertices can be marked as immobile, or affected by soft body physics.\u003c/p\u003e\n\u003cp\u003eI briefly thought about saving this data to separate weight files, but discarded the idea as it‚Äôs a recipe for easy desynchronization. As such, I decided that this data should be saved in the model.\u003c/p\u003e\n\u003cp\u003ePresently I‚Äôm appending the vertex weight data file with a block formatted like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e   'WGHT' - 4 byte identifier of the block\n   block size - UInt the number of bytes in the block (not including the identifier and block size)\n   vertex group count - UInt The number of vertex groups contained in this block.\n   vertex group list - A list of Vertex Groups, with the format detailed just below.\n\nVertex Groups:\n   vertex group name - C string name of the group.\n   index size - UInt Number of bytes in an index (2 or 4).\n   vertex count - UInt\n   vertex weight list - A list of Vertex Weights, with format detailed just below.\n\nVertex Weights:\n   vertex index - UShort or UInt The index of the vert\n   weight - float A float in the range of 0.0 to 1.0 with the weight of the vertex.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo far it‚Äôs working fine, but I‚Äôm not sure if this is the best way to add this feature into the Urho3D model file. Should the block be formatted differently? Should the data actually go else where in the file? Or are separate files a better option?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-08-08T13:40:49.850Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":24,"reads":40,"readers_count":39,"score":148.0,"yours":false,"topic_id":3432,"topic_slug":"adding-vertex-weights-to-the-model-file","display_username":"Xenodora","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://discourse.urho3d.io/t/bullets-softbody-physics-example/1319","internal":true,"reflection":false,"title":"Bullet's SoftBody physics example","clicks":7}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":793,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19983,"name":"","username":"Lumak","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png","created_at":"2017-08-08T14:47:43.649Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"xenodora\" data-post=\"1\" data-topic=\"3432\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/x/f9ae1b/40.png\" class=\"avatar\"\u003e xenodora:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSo far it‚Äôs working fine, but I‚Äôm not sure if this is the best way to add this feature into the Urho3D model file. Should the block be formatted differently? Should the data actually go else where in the file? Or are separate files a better option?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYeah, I wouldn‚Äôt modify the Urho3D model file format but go with what you already suspect - a separate file option, leaving the Urho3D model file format unchanged would allow you to work with anyone‚Äôs models.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-08-08T14:47:43.649Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":36,"readers_count":35,"score":12.2,"yours":false,"topic_id":3432,"topic_slug":"adding-vertex-weights-to-the-model-file","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":256,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19984,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2017-08-08T15:40:04.314Z","cooked":"\u003cp\u003eBut the models should already store vertex groups and weights somehow for bone animation, right? \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/confused.png?v=5\" title=\":confused:\" class=\"emoji\" alt=\":confused:\"\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-08-08T15:41:53.876Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":1,"reads":33,"readers_count":32,"score":16.6,"yours":false,"topic_id":3432,"topic_slug":"adding-vertex-weights-to-the-model-file","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"Lumak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":20010,"name":"Xenodora","username":"xenodora","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/x/f9ae1b/{size}.png","created_at":"2017-08-09T08:51:57.389Z","cooked":"\u003caside class=\"quote\" data-post=\"3\" data-topic=\"3432\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/modanung/40/1123_1.png\" class=\"avatar\"\u003e Modanung:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBut the models should already store vertex groups and weights somehow for bone animation, right? \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/confused.png?v=5\" title=\":confused:\" class=\"emoji\" alt=\":confused:\"\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eNot exactly, from my reading of Urho3D model file format, bone weightings are stored in the vertex, and only 4 bones can be associated with a single vertex, and those weights must add up to 1, which normally means they‚Äôre rescaled. If the original model had more than 4 bones affecting a vertex, it would keep the 4 with the largest weights, and discard everything else.\u003c/p\u003e\n\u003cp\u003eI could certainly abuse the bone weight list by adding phantom bones or using special weight values, and ignoring the summing to 1 rule. However, that will involve rejigging the model loader to handle the special cases, and creating models that might behave badly if loaded into other Urho3D software that lack the rejigged loader. Additionally it would have a limit of 4 vertex groups for normally boneless models, and lower for models that use actual bones.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-08-09T08:51:57.389Z","reply_count":1,"reply_to_post_number":3,"quote_count":1,"incoming_link_count":0,"reads":21,"readers_count":20,"score":9.2,"yours":false,"topic_id":3432,"topic_slug":"adding-vertex-weights-to-the-model-file","display_username":"Xenodora","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":793,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":20025,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2017-08-09T19:33:40.745Z","cooked":"\u003cp\u003eI don‚Äôt know if the mdl file supports it, but I think you can declare somewhat arbitrary vertex semantics that would let you add the weights (I‚Äôve never messed with it myself, though).\u003c/p\u003e\n\u003caside class=\"onebox whitelistedgeneric\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://urho3d.github.io/documentation/1.6/_vertex_buffers.html\" target=\"_blank\" rel=\"nofollow noopener\"\u003eUrho3D\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \n\n\u003ch3\u003e\u003ca href=\"https://urho3d.github.io/documentation/1.6/_vertex_buffers.html\" target=\"_blank\" rel=\"nofollow noopener\"\u003eVertex buffers\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003eUrho3D is a free lightweight, cross-platform 2D and 3D game engine implemented in C++ and released under the MIT license. Greatly inspired by OGRE and Horde3D.\u003c/p\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":5,"post_type":1,"updated_at":"2017-08-09T19:33:40.745Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":3.8,"yours":false,"topic_id":3432,"topic_slug":"adding-vertex-weights-to-the-model-file","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://urho3d.github.io/documentation/1.6/_vertex_buffers.html","internal":false,"reflection":false,"title":"Urho3D - Documentation - Vertex buffers","clicks":6}],"read":true,"user_title":null,"reply_to_user":{"username":"xenodora","name":"Xenodora","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/x/f9ae1b/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[19981,19983,19984,20010,20025]},"timeline_lookup":[[1,1933],[4,1932],[5,1931]],"suggested_topics":[{"id":7262,"title":"iOS build cannot be installed on sim or device","fancy_title":"iOS build cannot be installed on sim or device","slug":"ios-build-cannot-be-installed-on-sim-or-device","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d889ae74b8b75bfe705a15b4cee71e82faea0f4d.png","created_at":"2022-05-12T15:33:33.531Z","last_posted_at":"2022-05-12T16:13:22.078Z","bumped":true,"bumped_at":"2022-05-12T16:13:22.078Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":95,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1340,"username":"KatekovAnton","name":"KatekovAnton","avatar_template":"/user_avatar/discourse.urho3d.io/katekovanton/{size}/2988_2.png"}}]},{"id":7073,"title":"A plan to support static batching","fancy_title":"A plan to support static batching","slug":"a-plan-to-support-static-batching","posts_count":5,"reply_count":2,"highest_post_number":5,"image_url":null,"created_at":"2021-12-01T03:43:48.579Z","last_posted_at":"2021-12-02T23:30:07.199Z","bumped":true,"bumped_at":"2021-12-02T23:30:07.199Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":180,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7063,"title":"Quadspinner Gaea support on Urho?","fancy_title":"Quadspinner Gaea support on Urho?","slug":"quadspinner-gaea-support-on-urho","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2021-11-23T23:30:45.335Z","last_posted_at":"2021-11-23T23:30:45.396Z","bumped":true,"bumped_at":"2021-11-23T23:30:45.396Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":150,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7062,"title":"Is WebGL2.0 \u0026 GLES3.0 being supported in the near future?","fancy_title":"Is WebGL2.0 \u0026amp; GLES3.0 being supported in the near future?","slug":"is-webgl2-0-gles3-0-being-supported-in-the-near-future","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-11-23T09:04:28.802Z","last_posted_at":"2021-11-23T21:44:08.088Z","bumped":true,"bumped_at":"2021-11-23T21:44:08.088Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":199,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7290,"title":"Using HDR skies in scenes?","fancy_title":"Using HDR skies in scenes?","slug":"using-hdr-skies-in-scenes","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-07-01T22:10:02.015Z","last_posted_at":"2022-07-02T02:10:20.785Z","bumped":true,"bumped_at":"2022-07-02T02:10:20.785Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":133,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1529,"username":"hunkalloc","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/hunkalloc/{size}/3817_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":3432,"title":"Adding vertex weights to the model file","fancy_title":"Adding vertex weights to the model file","posts_count":5,"created_at":"2017-08-08T13:40:49.781Z","views":751,"reply_count":3,"like_count":1,"last_posted_at":"2017-08-09T19:33:40.745Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"adding-vertex-weights-to-the-model-file","category_id":16,"word_count":629,"deleted_at":null,"user_id":793,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_3432","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":4,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":793,"username":"xenodora","name":"Xenodora","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/x/f9ae1b/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":256,"username":"Lumak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":793,"username":"xenodora","name":"Xenodora","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/x/f9ae1b/{size}.png"},"last_poster":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"},"links":[{"url":"http://discourse.urho3d.io/t/bullets-softbody-physics-example/1319","title":"Bullet's SoftBody physics example","internal":true,"attachment":false,"reflection":false,"clicks":7,"user_id":793,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"},{"url":"https://urho3d.github.io/documentation/1.6/_vertex_buffers.html","title":"Urho3D - Documentation - Vertex buffers","internal":false,"attachment":false,"reflection":false,"clicks":6,"user_id":628,"domain":"urho3d.github.io","root_domain":"urho3d.github.io"}]}}