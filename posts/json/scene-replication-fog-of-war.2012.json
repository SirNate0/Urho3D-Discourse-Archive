{"post_stream":{"posts":[{"id":12028,"name":"","username":"Deveiss","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/ecc23a/{size}.png","created_at":"2016-05-13T20:56:05.000Z","cooked":"\u003cp\u003eIs it possible to implement a sort of ‚Äúfog of war‚Äù with Urho‚Äôs stock scene replication? Where their client is only sent data about nodes which that they‚Äôre supposed to have knowledge of? In some strategy games, you can only see real-time information of the map in areas that you‚Äôre units have ‚Äúvision‚Äù in. It would be easy in the client to say ‚Äúalright, do I have units that can see this part of the map? No? Then disregard any data we get about enemy movements in this area.‚Äù However, sending the entire game state to all clients opens the door to severe cheating. So‚Ä¶\u003c/p\u003e\n\u003cp\u003eAssume one server and two clients, where the server receives commands from both clients, who can order their units to move, attack, or idle. The server then takes those orders and executes them. All of the movement of nodes and simulation of damage is done on the server. Is there a way to relay the outcomes back to only those nodes that have ‚Äúvision‚Äù on those units? There currently isn‚Äôt any simulation done on the client, the client just sends events and receives the current game state to display.\u003c/p\u003e\n\u003cp\u003eOn the IRC it was suggested that I look into the MarkNetworkUpdate function, however this seems to be applied to replicated nodes automatically by the engine, and appears to not be able to discriminate between connections. Ideally, I‚Äôd be able to set an owner for each node, and then when the time comes to update each client, check to see what nodes they have ownership of, and only send updates for other units within their own unit‚Äôs circle of vision.\u003c/p\u003e\n\u003cp\u003eBonus question: Are shader parameters replicated? Because modifying the diffusion color on the server appears to have no effect on the client.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:12:16.974Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":35,"reads":15,"readers_count":14,"score":178.0,"yours":false,"topic_id":2012,"topic_slug":"scene-replication-fog-of-war","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":312,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12029,"name":"Lasse √ñ√∂rni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-05-13T23:10:39.000Z","cooked":"\u003cp\u003eRealistically I believe you have to modify the engine. Check the function Connection::ProcessExistingNode() where it does a simple interest management priority accumulation check using the NetworkPriority component, and just returns if the component says the node shouldn‚Äôt be replicated yet. You could for example insert some kind of interceptor callback, or make NetworkPriority subclassable. If you do it cleanly and it doesn‚Äôt hurt performance when not used, a pull request is welcome.\u003c/p\u003e\n\u003cp\u003eShader parameters aren‚Äôt replicated. Look either into custom messaging or storing parameters into node user vars, which do replicate, and apply from the node var to the material.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:12:17.028Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":15,"readers_count":14,"score":13.0,"yours":false,"topic_id":2012,"topic_slug":"scene-replication-fog-of-war","display_username":"Lasse √ñ√∂rni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12030,"name":"","username":"Deveiss","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/ecc23a/{size}.png","created_at":"2016-05-13T23:49:26.000Z","cooked":"\u003caside class=\"quote\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/cadaver/40/3_1.png\" class=\"avatar\"\u003e cadaver:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eYou could for example insert some kind of interceptor callback, or make NetworkPriority subclassable. If you do it cleanly and it doesn‚Äôt hurt performance when not used, a pull request is welcome.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eCould be a fun experiment. I‚Äôll play around with it, see what I can do.\u003c/p\u003e\n\u003caside class=\"quote\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/cadaver/40/3_1.png\" class=\"avatar\"\u003e cadaver:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eShader parameters aren‚Äôt replicated. Look either into custom messaging or storing parameters into node user vars, which do replicate, and apply from the node var to the material.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThank you. Before getting confirmation that this was how I‚Äôd have to do it, I added a networked Color attribute to my PlayerUnit component, and I‚Äôm working on a way to notify the clients when a new unit joins the scene or changes color, so they know to clone the material and apply the color change.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:12:17.129Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":13,"readers_count":12,"score":2.6,"yours":false,"topic_id":2012,"topic_slug":"scene-replication-fog-of-war","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":312,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[12028,12029,12030]},"timeline_lookup":[[1,2384]],"suggested_topics":[{"id":7115,"title":"Is it possbile to use one billboard for a lens flare?","fancy_title":"Is it possbile to use one billboard for a lens flare?","slug":"is-it-possbile-to-use-one-billboard-for-a-lens-flare","posts_count":17,"reply_count":4,"highest_post_number":17,"image_url":null,"created_at":"2022-01-02T03:10:48.953Z","last_posted_at":"2022-01-03T21:37:51.953Z","bumped":true,"bumped_at":"2022-01-03T21:37:51.953Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]},{"id":7210,"title":"Shadow Map Coverage Skewed to the Side","fancy_title":"Shadow Map Coverage Skewed to the Side","slug":"shadow-map-coverage-skewed-to-the-side","posts_count":8,"reply_count":5,"highest_post_number":8,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/6/640dc6184f3d70ce00e656555c22db772ea941a4_2_1024x545.jpeg","created_at":"2022-02-28T15:02:02.662Z","last_posted_at":"2022-03-06T04:51:22.096Z","bumped":true,"bumped_at":"2022-03-06T04:51:22.096Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":211,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster, Accepted Answer","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]},{"id":7212,"title":"Shadow Gap between Feet and Plane","fancy_title":"Shadow Gap between Feet and Plane","slug":"shadow-gap-between-feet-and-plane","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/8/897538cff25de49fafa7aa77574f822e99576b67_2_1024x686.jpeg","created_at":"2022-03-07T00:04:17.351Z","last_posted_at":"2022-03-07T00:17:57.413Z","bumped":true,"bumped_at":"2022-03-07T00:17:57.413Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}]},{"id":7065,"title":"Angelscript: Loading a char file into a 2D array: how?","fancy_title":"Angelscript: Loading a char file into a 2D array: how?","slug":"angelscript-loading-a-char-file-into-a-2d-array-how","posts_count":7,"reply_count":4,"highest_post_number":7,"image_url":null,"created_at":"2021-11-24T09:20:05.420Z","last_posted_at":"2021-11-28T11:19:39.689Z","bumped":true,"bumped_at":"2021-11-28T11:26:00.375Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":239,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":983,"username":"tarzeron","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ecae2f/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]}],"tags_descriptions":{},"id":2012,"title":"Scene Replication Fog of War","fancy_title":"Scene Replication Fog of War","posts_count":3,"created_at":"2016-05-13T20:56:05.000Z","views":373,"reply_count":0,"like_count":0,"last_posted_at":"2016-05-13T23:49:26.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"scene-replication-fog-of-war","category_id":10,"word_count":549,"deleted_at":null,"user_id":312,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_2012","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":312,"username":"Deveiss","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/ecc23a/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":3,"username":"cadaver","name":"Lasse √ñ√∂rni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2}],"created_by":{"id":312,"username":"Deveiss","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/ecc23a/{size}.png"},"last_poster":{"id":312,"username":"Deveiss","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/ecc23a/{size}.png"}}}