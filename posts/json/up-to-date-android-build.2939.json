{"post_stream":{"posts":[{"id":16794,"name":"kabu","username":"johnnycable","avatar_template":"/user_avatar/discourse.urho3d.io/johnnycable/{size}/788_2.png","created_at":"2017-03-22T10:29:09.660Z","cooked":"\u003cp\u003eI‚Äôm trying to deploy Urho for Android by using a modern, Android Studio, latest Cmake toolchain.\u003cbr\u003e\nTo be more clear, I want to support a process decoupling the upstream Urho3d library from the downstream app building.\u003cbr\u003e\nAs of now, the android build only support building ‚Äúone-way‚Äù, that is upstream. If I use the same build on the downstream app, I end up having an upstream library rebuild in the downstream app directory, and that‚Äôs not what I want. I want a modern, decoupled, lightweight (possibly) command line building process, much in the so fashionable CI style which is current today‚Ä¶ \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=5\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"\u003e\u003cbr\u003e\nMore, I want it to run flawlessly in both Android Studio and gradle wrapper. Please no rake / cmake cube-enter-the-build-line-fix-it-again, I‚Äôve already tried them all in all possible combination, there‚Äôs no way to make them work good, or at least I‚Äôm unable.\u003cbr\u003e\nAs of now, I‚Äôve create the cmd line utils, built the general downstream structure, and created a new Cmakefiles.txt for android studio 2.3 to work. After some troubling, Cmake appears to work generally, but maybe there‚Äôs something missing, something that‚Äôs inside the inner build process / android toolchain, because when I run gradlew assembleDebug i get a \u003cstrong\u003emmintrin\u003c/strong\u003e related error as follows:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFAILURE: Build failed with an exception.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eWhat went wrong:\u003cbr\u003e\nExecution failed for task ‚Äò:app:externalNativeBuildDebug‚Äô.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBuild command failed.\u003cbr\u003e\nError while executing process /usr/local/android/cmake/3.6.3155560/bin/cmake with arguments {‚Äìbuild /Users/max/Developer/Stage/Workspace/AndroidStudio/MyApplication12/app/.externalNativeBuild/cmake/debug/armeabi-v7a --target native-lib}\u003cbr\u003e\n[1/2] Building CXX object CMakeFiles/native-lib.dir/Users/max/Developer/Stage/Workspace/Urho/prima/src/prima.cpp.o\u003cbr\u003e\nFAILED: /usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang++  -target armv7-none-linux-androideabi -gcc-toolchain /usr/local/android/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64 --sysroot=/usr/local/android/ndk-bundle/platforms/android-9/arch-arm  -Dnative_lib_EXPORTS -I/usr/local/Urho/Urho3D-1.6/build/android/Debug/include -isystem /usr/local/android/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem /usr/local/android/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -isystem /usr/local/android/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -march=armv7-a -mfloat-abi=softfp -mfpu=vfpv3-d16 -fno-integrated-as -mthumb -Wa,‚Äìnoexecstack -Wformat -Werror=format-security -fno-exceptions -fno-rtti -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -march=armv7-a -mfloat-abi=softfp -mfpu=vfpv3-d16 -fno-integrated-as -mthumb -Wa,‚Äìnoexecstack -Wformat -Werror=format-security -fno-exceptions -fno-rtti  -O0 -fno-limit-debug-info -O0 -fno-limit-debug-info  -fPIC -MD -MT CMakeFiles/native-lib.dir/Users/max/Developer/Stage/Workspace/Urho/prima/src/prima.cpp.o -MF CMakeFiles/native-lib.dir/Users/max/Developer/Stage/Workspace/Urho/prima/src/prima.cpp.o.d -o CMakeFiles/native-lib.dir/Users/max/Developer/Stage/Workspace/Urho/prima/src/prima.cpp.o -c /Users/max/Developer/Stage/Workspace/Urho/prima/src/prima.cpp\u003cbr\u003e\nIn file included from /Users/max/Developer/Stage/Workspace/Urho/prima/src/prima.cpp:8:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/CoreEvents.h:25:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/‚Ä¶/Core/Object.h:26:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/‚Ä¶/Core/Variant.h:29:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/‚Ä¶/Math/Matrix3x4.h:25:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/‚Ä¶/Math/‚Ä¶/Math/Matrix4.h:25:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/‚Ä¶/Math/‚Ä¶/Math/Quaternion.h:28:\u003cbr\u003e\nIn file included from /usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/emmintrin.h:27:\u003cbr\u003e\nIn file included from /usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/xmmintrin.h:27:\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:39:5: error: use of undeclared identifier ‚Äò__builtin_ia32_emms‚Äô; did you mean ‚Äò__builtin_isless‚Äô?\u003cbr\u003e\n__builtin_ia32_emms();\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include/cmath:885:14: note: ‚Äò__builtin_isless‚Äô declared here\u003cbr\u003e\nreturn __builtin_isless(__type(__f1), __type(__f2));\u003cbr\u003e\n^\u003cbr\u003e\nIn file included from /Users/max/Developer/Stage/Workspace/Urho/prima/src/prima.cpp:8:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/CoreEvents.h:25:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/‚Ä¶/Core/Object.h:26:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/‚Ä¶/Core/Variant.h:29:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/‚Ä¶/Math/Matrix3x4.h:25:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/‚Ä¶/Math/‚Ä¶/Math/Matrix4.h:25:\u003cbr\u003e\nIn file included from /usr/local/Urho/Urho3D-1.6/build/android/Debug/include/Urho3D/Core/‚Ä¶/Math/‚Ä¶/Math/Quaternion.h:28:\u003cbr\u003e\nIn file included from /usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/emmintrin.h:27:\u003cbr\u003e\nIn file included from /usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/xmmintrin.h:27:\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:39:25: error: too few arguments to function call, expected 2, have 0\u003cbr\u003e\n__builtin_ia32_emms();\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:45:19: error: use of undeclared identifier '__builtin_ia32_vec_init_v2si‚Äô\u003cbr\u003e\nreturn (__m64)__builtin_ia32_vec_init_v2si(__i, 0);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:51:12: error: use of undeclared identifier '__builtin_ia32_vec_ext_v2si‚Äô\u003cbr\u003e\nreturn __builtin_ia32_vec_ext_v2si((__v2si)__m, 0);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:69:19: error: use of undeclared identifier '__builtin_ia32_packsswb‚Äô\u003cbr\u003e\nreturn (__m64)__builtin_ia32_packsswb((__v4hi)__m1, (__v4hi)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:75:19: error: use of undeclared identifier '__builtin_ia32_packssdw‚Äô\u003cbr\u003e\nreturn (__m64)__builtin_ia32_packssdw((__v2si)__m1, (__v2si)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:81:19: error: use of undeclared identifier '__builtin_ia32_packuswb‚Äô\u003cbr\u003e\nreturn (__m64)__builtin_ia32_packuswb((__v4hi)__m1, (__v4hi)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:87:19: error: use of undeclared identifier '__builtin_ia32_punpckhbw‚Äô\u003cbr\u003e\nreturn (__m64)__builtin_ia32_punpckhbw((__v8qi)__m1, (__v8qi)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:93:19: error: use of undeclared identifier '__builtin_ia32_punpckhwd‚Äô\u003cbr\u003e\nreturn (__m64)__builtin_ia32_punpckhwd((__v4hi)__m1, (__v4hi)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:99:19: error: use of undeclared identifier '__builtin_ia32_punpckhdq‚Äô\u003cbr\u003e\nreturn (__m64)__builtin_ia32_punpckhdq((__v2si)__m1, (__v2si)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:105:19: error: use of undeclared identifier '__builtin_ia32_punpcklbw‚Äô\u003cbr\u003e\nreturn (__m64)__builtin_ia32_punpcklbw((__v8qi)__m1, (__v8qi)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:111:19: error: use of undeclared identifier '__builtin_ia32_punpcklwd‚Äô\u003cbr\u003e\nreturn (__m64)__builtin_ia32_punpcklwd((__v4hi)__m1, (__v4hi)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:117:19: error: use of undeclared identifier '__builtin_ia32_punpckldq‚Äô\u003cbr\u003e\nreturn (__m64)__builtin_ia32_punpckldq((__v2si)__m1, (__v2si)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:123:19: error: use of undeclared identifier ‚Äò__builtin_ia32_paddb‚Äô; did you mean ‚Äò__builtin_arm_qadd‚Äô?\u003cbr\u003e\nreturn (__m64)__builtin_ia32_paddb((__v8qi)__m1, (__v8qi)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:123:19: note: ‚Äò__builtin_arm_qadd‚Äô declared here\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:123:40: error: cannot initialize a parameter of type ‚Äòint‚Äô with an rvalue of type ‚Äò__v8qi‚Äô (vector of 8 ‚Äòchar‚Äô values)\u003cbr\u003e\nreturn (__m64)__builtin_ia32_paddb((__v8qi)__m1, (__v8qi)__m2);\u003cbr\u003e\n^~~~~~~~~~~~\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:129:19: error: use of undeclared identifier ‚Äò__builtin_ia32_paddw‚Äô; did you mean ‚Äò__builtin_arm_qadd‚Äô?\u003cbr\u003e\nreturn (__m64)__builtin_ia32_paddw((__v4hi)__m1, (__v4hi)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:123:19: note: ‚Äò__builtin_arm_qadd‚Äô declared here\u003cbr\u003e\nreturn (__m64)__builtin_ia32_paddb((__v8qi)__m1, (__v8qi)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:129:40: error: cannot initialize a parameter of type ‚Äòint‚Äô with an rvalue of type ‚Äò__v4hi‚Äô (vector of 4 ‚Äòshort‚Äô values)\u003cbr\u003e\nreturn (__m64)__builtin_ia32_paddw((__v4hi)__m1, (__v4hi)__m2);\u003cbr\u003e\n^~~~~~~~~~~~\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:135:19: error: use of undeclared identifier ‚Äò__builtin_ia32_paddd‚Äô; did you mean ‚Äò__builtin_arm_qadd‚Äô?\u003cbr\u003e\nreturn (__m64)__builtin_ia32_paddd((__v2si)__m1, (__v2si)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:123:19: note: ‚Äò__builtin_arm_qadd‚Äô declared here\u003cbr\u003e\nreturn (__m64)__builtin_ia32_paddb((__v8qi)__m1, (__v8qi)__m2);\u003cbr\u003e\n^\u003cbr\u003e\n/usr/local/android/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/‚Ä¶/lib64/clang/3.8.256229/include/mmintrin.h:135:40: error: cannot initialize a parameter of type ‚Äòint‚Äô with an rvalue of type ‚Äò__v2si‚Äô (vector of 2 ‚Äòint‚Äô values)\u003cbr\u003e\nreturn (__m64)__builtin_ia32_paddd((__v2si)__m1, (__v2si)__m2);\u003cbr\u003e\n^~~~~~~~~~~~\u003cbr\u003e\nfatal error: too many errors emitted, stopping now [-ferror-limit=]\u003cbr\u003e\n20 errors generated.\u003cbr\u003e\nninja: build stopped: subcommand failed.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eTry:\u003cbr\u003e\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI‚Äôve read some other topics about this but they seem different or related to building, afaiu, android upstream library without SSE.\u003cbr\u003e\nIs there someone who can confirm this and / or shed some light?\u003cbr\u003e\nI‚Äôm up to get to the end of this, and I‚Äôd like to contribute a solution for this. I don‚Äôt like being defeated by a build system whatever complicated it can be‚Ä¶\u003cimg src=\"https://emoji.discourse-cdn.com/twitter/sunglasses.png?v=5\" title=\":sunglasses:\" class=\"emoji\" alt=\":sunglasses:\"\u003e\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-03-22T10:29:09.660Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":467,"reads":57,"readers_count":56,"score":2346.4,"yours":false,"topic_id":2939,"topic_slug":"up-to-date-android-build","display_username":"kabu","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":660,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16797,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2017-03-22T11:35:24.258Z","cooked":"\u003cp\u003eSince when the building of Urho3D library is coupled with downstream project? Our build scripts for the library building are complex because they are cross-platform. So, what do you want to achieve by making it work just for Android platform?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-03-22T11:35:24.258Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":46,"readers_count":45,"score":19.2,"yours":false,"topic_id":2939,"topic_slug":"up-to-date-android-build","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16801,"name":"kabu","username":"johnnycable","avatar_template":"/user_avatar/discourse.urho3d.io/johnnycable/{size}/788_2.png","created_at":"2017-03-22T14:01:41.837Z","cooked":"\u003cp\u003eThank you for your prompt answer. Very simply put, what I want is:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eupstream, normal Urho3D build, as usual, for android (and the other platforms)\u003c/li\u003e\n\u003cli\u003espawn my own apps downstream, by linking to the upstream prebuilt libraries‚Ä¶\u003cbr\u003e\nThis way, I‚Äôll be having a prebuilt libraries (for android and all other platforms) in UHRO3D_HOME, and a group of apps that links against them without having to rebuild liburho3d.a over and over again in the downstream.\u003cbr\u003e\nSo as you say I want to mantain them decoupled (a Urho3d build tree somewhere, a stage dir somewhere else), while building against a library installed somewhere. Quite a common solution. I want to avoid downstream library building again and again, if I‚Äôm creating an app. I‚Äôve did it successfully with os x and ios, but I‚Äôm getting problems with android‚Ä¶ so I‚Äôm guessing if it‚Äôs possible in that platform.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe error shown arises from an android build created in android studio 2.3 against latest android tools (SDK Build tools 25.0.2), while linking a cpp urho ‚Äúhelloworld‚Äù app to the URHO3D_HOME already built android library. While sure this is out of Urho‚Äôs way for android and maybe I shouldn‚Äôt be asking in the beginning, that would probably be possible so I wanted to give it a try‚Ä¶ latest android fully supports this kind of builds (uses cmake and ninja). For instance, this is the CMakelists.txt created in android studio 2.3 as explained in \u003ca href=\"https://developer.android.com/studio/projects/add-native-code.html\" rel=\"nofollow noopener\"\u003ehttps://developer.android.com/studio/projects/add-native-code.html\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eCMakelists.txt\u003c/p\u003e\n\u003chr\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026gt; # Sets the minimum version of CMake required to build the native library.\n\n\u0026gt; cmake_minimum_required(VERSION 3.4.1)\n\n\u0026gt; # Creates and names a library, sets it as either STATIC\n\u0026gt; # or SHARED, and provides the relative paths to its source code.\n\u0026gt; # You can define multiple libraries, and CMake builds them for you.\n\u0026gt; # Gradle automatically packages shared libraries with your APK.\n\n\u0026gt; #\n\u0026gt; # URHO_PROJECTDIR is the downstream android app dir\n\u0026gt; #\n\n\u0026gt; # get all sources\n\u0026gt; file (GLOB_RECURSE SOURCES $ENV{URHO_PROJECTDIR}/src/ FOLLOW_SYMLINKS $ENV{URHO_PROJECTDIR}/src/*.cpp )\n\u0026gt; file (GLOB_RECURSE HEADERS $ENV{URHO_PROJECTDIR}/src/ FOLLOW_SYMLINKS $ENV{URHO_PROJECTDIR}/src/*.h )\n\n\u0026gt; # get includes\n\u0026gt; include_directories ($ENV{URHO3D_HOME}/include/)\n\n\u0026gt; # set library name for downstream app\n\u0026gt; add_library( # Sets the name of the library.\n\u0026gt;              native-lib\n\n\u0026gt;              # Sets the library as a shared library.\n\u0026gt;              SHARED\n\n\u0026gt;              # Provides a relative path to your source file(s).\n\u0026gt;              ${SOURCES}\n\u0026gt;              )\n\n\u0026gt; # add urho3d library to link to\n\u0026gt; add_library ( Urho3D\n\u0026gt;               SHARED\n\u0026gt;               IMPORTED\n\u0026gt;               )\n\n\u0026gt; # get all the abis, it's coupled with gradle.build\n\u0026gt; set_target_properties( # Specifies the target library.\n\u0026gt;                        Urho3D\n\n\u0026gt;                        # Specifies the parameter you want to define.\n\u0026gt;                        PROPERTIES IMPORTED_LOCATION\n\n\u0026gt;                        # Provides the path to the library you want to import.\n\u0026gt;                        /usr/local/Urho/Urho3D-1.6/build/android/Debug/libs/${ANDROID_ABI}/libUrho3D.a\n\n\u0026gt;                        )\n\n\u0026gt; # Specifies libraries CMake should link to your target library. You\n\u0026gt; # can link multiple libraries, such as libraries you define in this\n\u0026gt; # build script, prebuilt third-party libraries, or system libraries.\n\n\u0026gt; target_link_libraries( # Specifies the target library.\n\u0026gt;                        native-lib\n\n\u0026gt;                        # Links the target library to the log library\n\u0026gt;                        # included in the NDK.\n\u0026gt;                        Urho3D\n\u0026gt;                        )\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003cp\u003eMy guess and my asking is if that error arise for this kind of build and does not where I build upstream urho library because i‚Äôm not taking in Urho3D-CMake-common.cmake and all other cmake setups?\u003cbr\u003e\nLinking against a library this way in c++ should work easily, just a source cpp file, a static library and cmake‚Ä¶ very common‚Ä¶\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-03-22T14:01:41.837Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":2,"reads":48,"readers_count":47,"score":19.6,"yours":false,"topic_id":2939,"topic_slug":"up-to-date-android-build","display_username":"kabu","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://developer.android.com/studio/projects/add-native-code.html","internal":false,"reflection":false,"title":"Add C and C++ Code to Your Project | Android Studio","clicks":5}],"read":true,"user_title":null,"reply_to_user":{"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":660,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16804,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2017-03-22T14:40:56.575Z","cooked":"\u003cp\u003eThis is what we expect our build system should do: build Urho3D library with ease on all the supported platforms. Once the library is built, it can be used as an external library in the downstream projects either directly from Urho3D‚Äôs build tree or from an installation directory (if you call ‚Äúmake install‚Äù to install Urho3D first to somewhere in your file system as an SDK). From this point on, your downstream project does not need to constantly rebuild the Urho3D library. In fact you should treat it like any other 3rd-party libraries that you may want to use in your own project. No more and no less.\u003c/p\u003e\n\u003cp\u003eAnd about the Urho3-CMake-common.cmake (or in master branch it is now called UrhoCommon.cmake), no, you don‚Äôt have to use it in your own project. This fact is not just applicable for Android platform, but also applicable to all platforms in general. You should use it when and only when you want to reuse the existing Urho3D build system for your own project, i.e you want your project becomes cross-platform for free using the already test-proven build system (I am not saying it is perfect, mind you). However, if you just want to target Android platform using Android Studio with Gradle/Maven or what have you, or you just want to create another Super-Editor for Urho3D using Qt Creator, or that you already have your own build system in place, then you don‚Äôt need to use this file and also you don‚Äôt need to structure your project based on Urho project. In fact you don‚Äôt have to use CMake even in order to use the library. Just use it as any other libraries you have used before. There is an example in our online documentation where we use pkg-config to link against the Urho3D library, just like any other libraries. It is your project so it is your way. I would be sad if our users have a view that Urho3D project is forcing our users to do thing certain way only.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-03-22T14:42:17.907Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":45,"readers_count":44,"score":9.0,"yours":false,"topic_id":2939,"topic_slug":"up-to-date-android-build","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16805,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2017-03-22T15:05:31.990Z","cooked":"\u003cp\u003eBTW, I am sorry that I didn‚Äôt answer your question straight on. I am not an Android Studio user, so I could not comment much on your specific error you faced.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-03-22T15:05:31.990Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":47,"readers_count":46,"score":19.4,"yours":false,"topic_id":2939,"topic_slug":"up-to-date-android-build","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16807,"name":"kabu","username":"johnnycable","avatar_template":"/user_avatar/discourse.urho3d.io/johnnycable/{size}/788_2.png","created_at":"2017-03-22T15:43:38.910Z","cooked":"\u003cp\u003eThank you very much. This is exactly as I expected.\u003cbr\u003e\nI removed SSE option from android library builds, looks like it is related to Intel processors only, and now those errors are gone. Now I‚Äôm getting undefined reference to glDeleteBuffers and a lots of other open gl, and __android_log_print and so on‚Ä¶ missing libraries‚Ä¶\u003cbr\u003e\nErrors on Android are then related to mr. gradle I think. It appears old ndk-build system was a lot more soundproof‚Ä¶\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-03-22T15:43:38.910Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":1,"reads":47,"readers_count":46,"score":14.4,"yours":false,"topic_id":2939,"topic_slug":"up-to-date-android-build","display_username":"kabu","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":660,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26934,"name":"18500864609","username":"18500864609","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/1/b77776/{size}.png","created_at":"2018-12-15T09:35:11.950Z","cooked":"\u003cp\u003ehello,I met a same problem like you met ,Have you solved this problem? Can you give me some suggestion?\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2018-12-15T09:35:11.950Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":30,"readers_count":29,"score":16.0,"yours":false,"topic_id":2939,"topic_slug":"up-to-date-android-build","display_username":"18500864609","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1093,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26935,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2018-12-15T09:52:19.842Z","cooked":"","post_number":8,"post_type":3,"updated_at":"2018-12-15T09:52:19.842Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":29,"readers_count":28,"score":5.8,"yours":false,"topic_id":2939,"topic_slug":"up-to-date-android-build","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"action_code":"closed.enabled","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26936,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2018-12-15T09:53:47.435Z","cooked":"\u003cp\u003eWe have migrated to use Gradle build system for Android platform.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2018-12-15T09:53:47.435Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":29,"readers_count":28,"score":15.8,"yours":false,"topic_id":2939,"topic_slug":"up-to-date-android-build","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[16794,16797,16801,16804,16805,16807,26934,26935,26936]},"timeline_lookup":[[1,2072],[7,1439]],"suggested_topics":[{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7125,"title":"Android mobile shows jaggies in the instersection plane-terrain","fancy_title":"Android mobile shows jaggies in the instersection plane-terrain","slug":"android-mobile-shows-jaggies-in-the-instersection-plane-terrain","posts_count":5,"reply_count":3,"highest_post_number":5,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d36aedb4e8cf5409efca6c976aae7e4a5c499eb9.png","created_at":"2022-01-11T11:59:18.993Z","last_posted_at":"2022-01-11T21:27:40.692Z","bumped":true,"bumped_at":"2022-01-12T07:36:41.695Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":129,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7181,"title":"StaticModelGroup - Are ShaderParameters Shared?","fancy_title":"StaticModelGroup - Are ShaderParameters Shared?","slug":"staticmodelgroup-are-shaderparameters-shared","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-02-02T09:31:19.658Z","last_posted_at":"2022-02-02T17:06:24.059Z","bumped":true,"bumped_at":"2022-02-02T17:06:24.059Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":120,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7266,"title":"Compile Urho3D 1.8 failed with the default MinGW of Clion2022.1","fancy_title":"Compile Urho3D 1.8 failed with the default MinGW of Clion2022.1","slug":"compile-urho3d-1-8-failed-with-the-default-mingw-of-clion2022-1","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/f/fcbe1a1f0cd74c5cc158c8c790c6c472f3b96011_2_1024x359.png","created_at":"2022-05-14T06:22:45.469Z","last_posted_at":"2022-05-16T06:45:54.546Z","bumped":true,"bumped_at":"2022-05-16T06:45:54.546Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":124,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":745,"username":"ChunFengTsin","name":"Chun Feng Tsin","avatar_template":"/user_avatar/discourse.urho3d.io/chunfengtsin/{size}/450_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":2939,"title":"Up-to-date Android Build","fancy_title":"Up-to-date Android Build","posts_count":9,"created_at":"2017-03-22T10:29:09.580Z","views":1785,"reply_count":2,"like_count":0,"last_posted_at":"2018-12-15T09:53:47.435Z","visible":true,"closed":true,"archived":false,"has_summary":false,"archetype":"regular","slug":"up-to-date-android-build","category_id":10,"word_count":2914,"deleted_at":null,"user_id":660,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_2939","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":9,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":4},{"id":660,"username":"johnnycable","name":"kabu","avatar_template":"/user_avatar/discourse.urho3d.io/johnnycable/{size}/788_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":1093,"username":"18500864609","name":"18500864609","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/1/b77776/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0}],"created_by":{"id":660,"username":"johnnycable","name":"kabu","avatar_template":"/user_avatar/discourse.urho3d.io/johnnycable/{size}/788_2.png"},"last_poster":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"},"links":[{"url":"https://developer.android.com/studio/projects/add-native-code.html","title":"Add C and C++ Code to Your Project | Android Studio","internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":660,"domain":"developer.android.com","root_domain":"android.com"}]}}