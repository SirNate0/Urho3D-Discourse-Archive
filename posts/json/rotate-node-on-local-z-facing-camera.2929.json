{"post_stream":{"posts":[{"id":16743,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2017-03-19T16:29:31.042Z","cooked":"\u003cp\u003eHi ! I‚Äôm trying to create a flashlight beam effect (A Custom geometry quad always facing the camera)\u003cbr\u003e\nThe problem is i need to rotate this beamNode only on z axis and leave the other axes untouched.\u003cbr\u003e\nNo matter how i tried so far sometimes it works but if i rotate the flashlight in some direction the up axis is changing and i don‚Äôt know how to calculate it.\u003c/p\u003e\n\u003cp\u003eThis code works if the flashlight has 0,0,0 rotation\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eVector3 p = camNode.position - beamNode.get_worldPosition();\np.z = 0.0f;\nQuaternion q;\nq.FromRotationTo(p , Vector3(0,1,0));\nbeamNode.rotation = q;\n// small correction needed :\nVector3 r = beamNode.rotation.get_eulerAngles();\nr.z = 360.0f - r.z;\nbeamNode.rotation = Quaternion(r.x , r.y , r.z);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOnce i rotate my flashlight in some direction the beamNode rotation is wrong\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-03-19T16:31:18.915Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":268,"reads":69,"readers_count":68,"score":1357.8,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://discourse.urho3d.io/t/laser-and-laser-prefab/3603/5","internal":true,"reflection":true,"title":"Laser and Laser prefab","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16747,"name":"","username":"Lumak","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png","created_at":"2017-03-19T17:39:37.204Z","cooked":"\u003cp\u003eHow about:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003ep.z = 0.0f;\u003cbr\u003e\np.Normalize();\u003cbr\u003e\nbeamNode.rotation = Quaternion(Vector3::FORWARD, p);\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eWouldn‚Äôt that work?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-03-19T17:39:37.204Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":63,"readers_count":62,"score":37.6,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":256,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16750,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2017-03-19T17:57:51.093Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eHow about:\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cpre\u003e\u003ccode\u003ep.z = 0.0f;\np.Normalize();\nbeamNode.rotation = Quaternion(Vector3::FORWARD, p);\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWouldn‚Äôt that work?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThat again works only if my flashlightNode rotation is set to 0,0,0. once i rotate my flashlight (the flashlight is parent of beamNode) the rotation is invalid\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-03-19T17:57:51.093Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":1,"reads":65,"readers_count":64,"score":23.0,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lumak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16753,"name":"","username":"Lumak","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png","created_at":"2017-03-19T18:32:28.905Z","cooked":"\u003cp\u003eThen you‚Äôll need to work with worldRotation. Pseudo code would look something like:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003edeltaRotation = beamNode.getworldrotation - Quaternion(Vector3::FORWARD, p); // or use Inverse() but the function operator would do the same thing.\u003c/li\u003e\n\u003cli\u003ebeamNode.setworldrotation = beamnode.getworldrotation * deltaRotation ();\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eEdit: I thought more about this, and you might have to substitute flashlightNode in 1) to get the proper orientation.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-03-19T19:34:54.678Z","reply_count":1,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":1,"reads":66,"readers_count":65,"score":23.2,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":256,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16759,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2017-03-19T20:37:23.168Z","cooked":"\u003cp\u003eStill doesn‚Äôt work‚Ä¶I get back to it tomorrow. I know i could use a billboard set and set face camera mode , but i want extra control per vertex alpha and calculate the beamMesh opacity based on the angle between the camera direction and flashlight direction.If the angle is smaller the beam is more visible and if the angle is bigger the lens flare is more visible\u003cbr\u003e\nsomething like this.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/c9cacf55677fe9193b72bbb3d09fb96b7cac1ffe.gif\" width=\"320\" height=\"237\"\u003e\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-03-19T20:43:31.522Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":62,"readers_count":61,"score":12.4,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Lumak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":"downloaded local copies of images","can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16769,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2017-03-20T12:10:59.650Z","cooked":"\u003cp\u003eStill no luck , any ideas appreciated.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-03-20T12:10:59.650Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":58,"readers_count":57,"score":26.6,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16773,"name":"","username":"Lumak","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png","created_at":"2017-03-20T16:30:52.444Z","cooked":"\u003cp\u003eHere is something else that you can try.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eVector3 p = camNode.position - beamNode.get_worldPosition();\u003cbr\u003e\np.z = 0.0f;\u003cbr\u003e\np.Normalize();\u003cbr\u003e\nQuaternion q(beamNode.GetWorldDirection(), p); // delta rotation\u003cbr\u003e\nbeamNode.SetRotation( beamNode.GetRotation() * q); // add delta rot\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIf that doesn‚Äôt work, try debugging it using debug lines - visually seeing what‚Äôs going on may help.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-03-20T16:30:52.444Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":55,"readers_count":54,"score":26.0,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":256,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16775,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2017-03-20T18:29:30.391Z","cooked":"\u003caside class=\"quote no-group quote-modified\" data-username=\"Lumak\" data-post=\"7\" data-topic=\"2929\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/40.png\" class=\"avatar\"\u003e Lumak:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eHere is something else that you can try.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eVector3 p = camNode.position - beamNode.get_worldPosition();\u003cbr\u003e\np.z = 0.0f;\u003cbr\u003e\np.Normalize();\u003cbr\u003e\nQuaternion q(beamNode.GetWorldDirection(), p); // delta rotation\u003cbr\u003e\nbeamNode.SetRotation( beamNode.GetRotation() * q); // add delta rot\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIf that doesn‚Äôt work, try debugging it using debug lines - visually seeing what‚Äôs going on may help.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis rotates  the beamNode constantly like a fan and changes the direction according to direction between the camera and the node.\u003cbr\u003e\nUsually i always draw my ideas on a piece of paper first (vectors , points) and when i‚Äôm 100% sure what i want to achieve i just do the math for it.This technique worked so far but this is just beyond my knowledge.\u003cbr\u003e\nI also tried to apply the Z euler rotation only\u003c/p\u003e\n\u003cp\u003ebeamNode.rotation = Quaternion(0,0,angle);\u003c/p\u003e\n\u003cp\u003eWhere i tried to calculate angle different ways and it didn‚Äôt worked.This rotates the node on local Z in the desired direction but the angle value is always wrong.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2017-03-20T18:30:33.232Z","reply_count":0,"reply_to_post_number":7,"quote_count":1,"incoming_link_count":0,"reads":54,"readers_count":53,"score":10.8,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16777,"name":"","username":"Lumak","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png","created_at":"2017-03-20T21:58:26.076Z","cooked":"\u003cp\u003eCreated a test case to set the beamNode in the direction that the camera is facing:\u003cbr\u003e\n\u003cdiv class=\"lazyYT\" data-youtube-id=\"ofM7Q0-EXHk\" data-youtube-title=\"\" data-width=\"480\" data-height=\"270\" data-parameters=\"feature=oembed\u0026amp;wmode=opaque\"\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eHierarchy:\u003cbr\u003e\n-rightHand\u003cbr\u003e\n‚ÄìflashlightNode\u003cbr\u003e\n‚ÄîbeamNode\u003c/p\u003e\n\u003cp\u003ecode:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cpre\u003e\u003ccode\u003eNode *beamNode = characterNode-\u0026gt;GetChild(\"beamnode\", true);\nif (beamNode)\n{\n    Vector3 camFwd = cameraNode_-\u0026gt;GetWorldDirection();\n    Vector3 lgtFwd = beamNode-\u0026gt;GetWorldDirection();\n    Quaternion q(lgtFwd, camFwd);\n    beamNode-\u0026gt;SetRotation(beamNode-\u0026gt;GetRotation() * q);\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cpre\u003e\u003ccode\u003e}\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI know you‚Äôre trying to orient the beamNode based on cam pos, but ideally, the above computation would be similar to the one that I provided previously.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2017-03-20T22:02:29.720Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":55,"readers_count":54,"score":16.0,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www.youtube.com/watch?v=ofM7Q0-EXHk","internal":false,"reflection":false,"title":"YouTube","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":256,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16778,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2017-03-20T23:47:57.920Z","cooked":"\u003cp\u003eI think what you‚Äôre looking for is something like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003enode_-\u0026gt;LookAt(node_-\u0026gt;GetWorldPosition() + node_-\u0026gt;GetDirection(),\n              node_-\u0026gt;GetWorldPosition() - cameraNode-\u0026gt;GetWorldPosition());\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI expected to find a FaceCameraMode for this, but haven‚Äôt.\u003c/p\u003e\n\u003cp\u003eTo make the beam fade away you could do something like:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003enode_-\u0026gt;GetComponent\u0026lt;StaticModel\u0026gt;()-\u0026gt;GetMaterial()\n    -\u0026gt;SetShaderParameter(\"MatDiffColor\", Color::WHITE * Clamp(0.9f - Abs(\n    1.0f - node_-\u0026gt;GetDirection().Angle(\n    node_-\u0026gt;GetWorldPosition() - cameraNode-\u0026gt;GetWorldPosition()) / 90.0f),\n    0.0f, 1.0f));\n\u003c/code\u003e\u003c/pre\u003e","post_number":10,"post_type":1,"updated_at":"2017-03-21T03:05:02.350Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":57,"readers_count":56,"score":38.4,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":16779,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2017-03-20T23:57:42.539Z","cooked":"\u003cp\u003eAfter a long struggling, i found the solution.The proper way doing it was (like i first thought) rotate only on z euler.The only problem was i didn‚Äôt take node rotation into \u003ca href=\"http://account.It\" rel=\"nofollow noopener\"\u003eaccount.It\u003c/a\u003e goes like this :\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\nVector3 diff = camNode.get_worldPosition() - beamNode.get_worldPosition();\ndiff.Normalize();\ndiff = node.rotation.Inverse() * diff;\nfloat angleZ = Atan2(diff.y , diff.x) + 90;\nbeamNode.set_rotation(Quaternion(0,0,angleZ));\n\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eWhat bothers me in this code is that Atan2 should return the  angle in radians and i should convert it to degrees first but it just works without it for some reason (no need for angleZ * M_RADTODEG)‚Ä¶ strange.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2017-03-20T23:57:42.539Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":56,"readers_count":55,"score":31.2,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://account.It","internal":false,"reflection":false,"title":"Account.it - dominio premium in vendita","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16780,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2017-03-21T00:30:42.779Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003e\"I think what you‚Äôre looking for is something like this:\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003enode_-\u0026gt;LookAt(node_-\u0026gt;GetWorldPosition() + node_-\u0026gt;GetDirection(),\u003cbr\u003e\ncameraNode-\u0026gt;GetWorldPosition() - node_-\u0026gt;GetWorldPosition());\"\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eYes ,this works too ! Thanks.And it is more elegant than mine version.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2017-03-21T02:19:28.650Z","reply_count":1,"reply_to_post_number":10,"quote_count":0,"incoming_link_count":3,"reads":51,"readers_count":50,"score":45.2,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16781,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2017-03-21T03:48:31.062Z","cooked":"\u003cp\u003eAnd then you‚Äôll end up with something like this:\u003c/p\u003e\n\u003cp\u003e          \u003ciframe width=\"640\" height=\"360\" src=\"https://player.vimeo.com/video/209325270\" data-original-href=\"https://vimeo.com/209325270\" frameborder=\"0\" allowfullscreen=\"\" seamless=\"seamless\" sandbox=\"allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation\"\u003e\u003c/iframe\u003e\n\u003c/p\u003e\n\u003cp\u003e          \u003ciframe width=\"640\" height=\"360\" src=\"https://player.vimeo.com/video/209327362\" data-original-href=\"https://vimeo.com/209327362\" frameborder=\"0\" allowfullscreen=\"\" seamless=\"seamless\" sandbox=\"allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation\"\u003e\u003c/iframe\u003e\n\u003c/p\u003e\n\u003caside class=\"onebox whitelistedgeneric\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003cimg src=\"https://github.githubassets.com/favicons/favicon.svg\" class=\"site-icon\" width=\"32\" height=\"32\"\u003e\n      \u003ca href=\"https://github.com/Modanung/BeamLight\" target=\"_blank\"\u003eGitHub\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003cimg src=\"https://avatars2.githubusercontent.com/u/7316241?s=400\u0026amp;v=4\" class=\"thumbnail onebox-avatar\" width=\"400\" height=\"400\"\u003e\n\n\u003ch3\u003e\u003ca href=\"https://github.com/Modanung/BeamLight\" target=\"_blank\"\u003eModanung/BeamLight\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003eA custom component for Urho3D. Contribute to Modanung/BeamLight development by creating an account on GitHub.\u003c/p\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":13,"post_type":1,"updated_at":"2017-03-21T04:57:37.022Z","reply_count":1,"reply_to_post_number":12,"quote_count":0,"incoming_link_count":3,"reads":50,"readers_count":49,"score":195.0,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/Modanung/BeamLight","internal":false,"reflection":false,"title":"GitHub - Modanung/BeamLight: A custom component for Urho3D","clicks":25}],"read":true,"user_title":"","reply_to_user":{"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16784,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2017-03-21T16:01:20.374Z","cooked":"\u003cp\u003eOr something like this\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/95879483d83dbcfec9c6cdc77d712ccbd836458f.jpg\"\u003e\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2017-03-21T16:06:33.949Z","reply_count":0,"reply_to_post_number":13,"quote_count":0,"incoming_link_count":2,"reads":47,"readers_count":46,"score":139.4,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":"downloaded local copies of images","can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16895,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2017-03-28T08:52:29.648Z","cooked":"\u003cp\u003eWow ! This flashlight effect looks really cool ! I made a 3 min video of playing with the flashlight, \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e Also the dynamic lights use inverse square attenuation and looks way better than the default ramp texture (thanks to dragonCASTjosh !)\u003cbr\u003e\n\u003ca href=\"https://github.com/urho3d/Urho3D/issues/1478\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\"\u003ehttps://github.com/urho3d/Urho3D/issues/1478\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eHere‚Äôs the video.\u003cbr\u003e\n\u003cdiv class=\"lazyYT\" data-youtube-id=\"1u2iXyBeUf0\" data-youtube-title=\"Flashlight Test\" data-width=\"480\" data-height=\"270\" data-parameters=\"feature=oembed\u0026amp;wmode=opaque\"\u003e\u003c/div\u003e\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2017-03-28T08:52:29.648Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":43,"readers_count":42,"score":118.6,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/issues/1478","internal":false,"reflection":false,"title":"Inverse Square light falloff ¬∑ Issue #1478 ¬∑ urho3d/Urho3D ¬∑ GitHub","clicks":8},{"url":"https://www.youtube.com/watch?v=1u2iXyBeUf0","internal":false,"reflection":false,"title":"Flashlight Test - YouTube","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":16905,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2017-03-28T16:53:00.891Z","cooked":"\u003cp\u003eThat looks really good indeed! \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003cbr\u003e\nOne thing that would be an improvement is using something like the soft particles technique. A shader that would make the beam fade to fully transparent before it crosses a surface. A blurred cross section of the world geometry as alpha texture seems like a good option to me. But I‚Äôm no shader expert.\u003c/p\u003e","post_number":16,"post_type":1,"updated_at":"2017-03-28T16:53:00.891Z","reply_count":0,"reply_to_post_number":15,"quote_count":0,"incoming_link_count":1,"reads":41,"readers_count":40,"score":28.2,"yours":false,"topic_id":2929,"topic_slug":"rotate-node-on-local-z-facing-camera","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[16743,16747,16750,16753,16759,16769,16773,16775,16777,16778,16779,16780,16781,16784,16895,16905]},"timeline_lookup":[[1,2075],[2,2074],[8,2073],[15,2066]],"suggested_topics":[{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7115,"title":"Is it possbile to use one billboard for a lens flare?","fancy_title":"Is it possbile to use one billboard for a lens flare?","slug":"is-it-possbile-to-use-one-billboard-for-a-lens-flare","posts_count":17,"reply_count":4,"highest_post_number":17,"image_url":null,"created_at":"2022-01-02T03:10:48.953Z","last_posted_at":"2022-01-03T21:37:51.953Z","bumped":true,"bumped_at":"2022-01-03T21:37:51.953Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7146,"title":"How create affordable comfortable and modern terrain?","fancy_title":"How create affordable comfortable and modern terrain?","slug":"how-create-affordable-comfortable-and-modern-terrain","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-01-21T15:20:08.910Z","last_posted_at":"2022-01-21T21:51:58.799Z","bumped":true,"bumped_at":"2022-01-21T22:03:14.896Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":193,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7182,"title":"How install landscape in the format (.tor or .obj)?","fancy_title":"How install landscape in the format (.tor or .obj)?","slug":"how-install-landscape-in-the-format-tor-or-obj","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-02-03T16:58:20.976Z","last_posted_at":"2022-02-04T16:34:09.663Z","bumped":true,"bumped_at":"2022-02-04T16:34:09.663Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":151,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":"latest","description":"Most Recent Poster, Accepted Answer","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":2929,"title":"Rotate node on local Z facing camera","fancy_title":"Rotate node on local Z facing camera","posts_count":16,"created_at":"2017-03-19T16:29:30.983Z","views":2181,"reply_count":8,"like_count":14,"last_posted_at":"2017-03-28T16:53:00.891Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"rotate-node-on-local-z-facing-camera","category_id":10,"word_count":1022,"deleted_at":null,"user_id":247,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_2929","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":16,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":10,"username":"Modanung","excerpt":"I think what you‚Äôre looking for is something like this: \nnode_-\u0026gt;LookAt(node_-\u0026gt;GetWorldPosition() + node_-\u0026gt;GetDirection(),\n              node_-\u0026gt;GetWorldPosition() - cameraNode-\u0026gt;GetWorldPosition());\n\nI expected to find a FaceCameraMode for this, but haven‚Äôt. \nTo make the beam fade away you could do so\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","post_count":9,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":256,"username":"Lumak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0}],"created_by":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"},"last_poster":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"},"links":[{"url":"https://github.com/Modanung/BeamLight","title":"GitHub - Modanung/BeamLight: A custom component for Urho3D","internal":false,"attachment":false,"reflection":false,"clicks":25,"user_id":192,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/urho3d/Urho3D/issues/1478","title":"Inverse Square light falloff ¬∑ Issue #1478 ¬∑ urho3d/Urho3D ¬∑ GitHub","internal":false,"attachment":false,"reflection":false,"clicks":8,"user_id":247,"domain":"github.com","root_domain":"github.com"}]}}