{"post_stream":{"posts":[{"id":10309,"name":"","username":"dragonCASTjosh","avatar_template":"/user_avatar/discourse.urho3d.io/dragoncastjosh/{size}/774_2.png","created_at":"2016-02-21T22:15:30.000Z","cooked":"\u003cp\u003eAfter working on PBR for a while i noticed so major performance problems, initially i assumed it to be part of how i was implementing IBL but after checking the implementation with other engines i found that it is not a problem with the the technique. I came to the conclusion it is either an issue with Urho3D‚Äôs or i was implementing it into the wrong area of the shader for the desired affect. Any help with the problem would greatly.\u003c/p\u003e\n\u003cp\u003eEntry to the IBL is at the bottom of the code\u003cbr\u003e\nLighting.hlsl\u003c/p\u003e\n\u003cp\u003e[code]        float radicalInverse_VdC(uint bits)\u003cbr\u003e\n{\u003cbr\u003e\nbits = (bits \u0026lt;\u0026lt; 16u) | (bits \u0026gt;\u0026gt; 16u);\u003cbr\u003e\nbits = ((bits \u0026amp; 0x55555555u) \u0026lt;\u0026lt; 1u) | ((bits \u0026amp; 0xAAAAAAAAu) \u0026gt;\u0026gt; 1u);\u003cbr\u003e\nbits = ((bits \u0026amp; 0x33333333u) \u0026lt;\u0026lt; 2u) | ((bits \u0026amp; 0xCCCCCCCCu) \u0026gt;\u0026gt; 2u);\u003cbr\u003e\nbits = ((bits \u0026amp; 0x0F0F0F0Fu) \u0026lt;\u0026lt; 4u) | ((bits \u0026amp; 0xF0F0F0F0u) \u0026gt;\u0026gt; 4u);\u003cbr\u003e\nbits = ((bits \u0026amp; 0x00FF00FFu) \u0026lt;\u0026lt; 8u) | ((bits \u0026amp; 0xFF00FF00u) \u0026gt;\u0026gt; 8u);\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\t\treturn float(bits) * 2.3283064365386963e-10; // / 0x100000000\n\t}\n\n\tfloat2 Hammersley(uint i, uint n)\n\t{\n\t\treturn float2((float)i / (float)n, radicalInverse_VdC(i));\n\t}\n\n\tfloat3 ImportanceSampleGGX(float2 Xi, float Roughness, float3 N)\n\t{\n\t\tfloat a = Roughness * Roughness;\n\t\tfloat Phi = 2 * 3.14159 * Xi.x;\n\t\tfloat CosTheta = sqrt((1 - Xi.y) / (1 + (a*a - 1) * Xi.y));\n\t\tfloat SinTheta = sqrt(1 - CosTheta * CosTheta);\n\t\tfloat3 H = 0;\n\t\tH.x = SinTheta * cos(Phi);\n\t\tH.y = SinTheta * sin(Phi);\n\t\tH.z = CosTheta;\n\n\t\tfloat3 UpVector = abs(N.z) \u0026lt; 0.999 ? float3(0, 0, 1) : float3(1, 0, 0);\n\t\tfloat3 TangentX = normalize(cross(UpVector, N));\n\t\tfloat3 TangentY = cross(N, TangentX);\n\t\t// Tangent to world space\n\t\treturn TangentX * H.x + TangentY * H.y + N * H.z;\n\n\n\t}\n\n\tfloat GGX(float nDotV, float a)\n\t{\n\t\tfloat aa = a*a;\n\t\tfloat oneMinusAa = 1 - aa;\n\t\tfloat nDotV2 = 2 * nDotV;\n\t\tfloat root = aa + oneMinusAa * nDotV * nDotV;\n\t\treturn nDotV2 / (nDotV + sqrt(root));\n\t}\n\n\tfloat G_Smith(float a, float nDotV, float nDotL)\n\t{\n\n\t\treturn GGX(nDotL, a * a) * GGX(nDotV, a * a);\n\t}\n\n\tfloat3 PrefilterEnvMap(float Roughness, float3 R)\n\t{\n\t\tfloat3 N = R;\n\t\tfloat3 V = R;\n\n\t\tfloat3 PrefilteredColor = 0;\n\t\tconst uint NumSamples = 1;\n\n\t\tfloat TotalWeight = 0.0000001f;\n\n\t\tfor (uint i = 0; i \u0026lt; NumSamples; i++)\n\t\t{\n\t\t\tfloat2 Xi = Hammersley(i * 2 + 0, NumSamples);\n\t\t\tfloat3 H = ImportanceSampleGGX(Xi, Roughness, N);\n\t\t\tfloat3 L = 2 * dot(V, H) * H - V;\n\t\t\tfloat NoL = saturate(dot(N, L));\n\t\t\tif (NoL \u0026gt; 0)\n\t\t\t{\n\t\t\t\tPrefilteredColor += SampleCubeLOD(ZoneCubeMap, float4(L, 0)).rgb * NoL;\n\t\t\t\tTotalWeight += NoL;\n\t\t\t}\n\t\t}\n\t\treturn PrefilteredColor / TotalWeight;\n\t}\n\n\tfloat3 ApproximateSpecularIBL(float3 SpecularColor, float Roughness, float3 N, float3 V)\n\t{\n\t/*\tfloat NoV = saturate(dot(N, V));*/\n\t\tfloat3 R = 2 * dot(V, N) * N - V;\n\t\tfloat3 PrefilteredColor = PrefilterEnvMap(Roughness, R);\n\t\t//float2 envBRDF = IntegrateBRDF(Roughness, NoV);\n\t\treturn   PrefilteredColor * (SpecularColor);\n\t}[/code]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLitSolid.hlsl\u003c/p\u003e\n\u003cp\u003e[code] \u003cspan class=\"hashtag\"\u003e#elif\u003c/span\u003e defined(DEFERRED)\u003cbr\u003e\n// Fill deferred G-buffer\u003cbr\u003e\nfloat specIntensity = specColor.g;\u003cbr\u003e\nfloat specPower = cMatSpecColor.a / 255.0;\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e    float3 finalColor = iVertexLight * diffColor.rgb;\n    #ifdef AO\n       #ifdef IBL\n           const float aoFactor = Sample2D(EmissiveMap, iTexCoord).r;\n       #else\n           // If using AO, the vertex light ambient is black, calculate occluded ambient here\n           finalColor += Sample2D(EmissiveMap, iTexCoord2).rgb * cAmbientColor * diffColor.rgb;\n       #endif\n    #endif\n    \n    #if defined(PBR) \u0026amp;\u0026amp; defined(IBL)\n    \n        const float3 toCamera = normalize(iWorldPos.xyz - cCameraPosPS);\n\n\t    const float3 reflection = normalize(reflect(toCamera, normal));\n        float3 cubeColor = iVertexLight.rgb;\n        float3 iblColor = ApproximateSpecularIBL( specColor, normal, -toCamera);\n        \n        float horizonOcclusion = 1.3;\n        float horizon = saturate(1 + horizonOcclusion * dot(reflection, normal));\n        horizon *= horizon;\n        \n        #ifdef AO\n            finalColor += LinearFromSRGB(iblColor * aoFactor * horizon * cubeColor);\n        #else                            \n            finalColor += LinearFromSRGB(iblColor * horizon * cubeColor);\n        #endif\n    #endif[/code]\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:10:14.492Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":58,"reads":12,"readers_count":11,"score":292.4,"yours":false,"topic_id":1798,"topic_slug":"help-with-renderer-performance","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":284,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":10310,"name":"","username":"sabotage3d","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","created_at":"2016-02-21T22:26:30.000Z","cooked":"\u003cp\u003eIs the problem only with DirectX as you posted only hlsl version of the shader?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:10:14.558Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":11,"readers_count":10,"score":2.2,"yours":false,"topic_id":1798,"topic_slug":"help-with-renderer-performance","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":151,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":10311,"name":"","username":"dragonCASTjosh","avatar_template":"/user_avatar/discourse.urho3d.io/dragoncastjosh/{size}/774_2.png","created_at":"2016-02-21T22:34:57.000Z","cooked":"\u003caside class=\"quote\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/sabotage3d/40/87_1.png\" class=\"avatar\"\u003e sabotage3d:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIs the problem only with DirectX as you posted only hlsl version of the shader?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI only have the affect in DirectX at the moment\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:10:14.624Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":11,"readers_count":10,"score":2.2,"yours":false,"topic_id":1798,"topic_slug":"help-with-renderer-performance","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":284,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":10320,"name":"Lasse √ñ√∂rni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-02-22T09:02:23.000Z","cooked":"\u003cp\u003eIf I understand right, you‚Äôre doing a sampling-heavy operation in the G-buffer pass (before lighting), so it would be done for every visible pixel of every solid object.\u003c/p\u003e\n\u003cp\u003eBoth the good and the bad news is that there should be nothing Urho-specific in optimizing that. Can‚Äôt help you more specifically.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:10:15.299Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":11,"readers_count":10,"score":7.2,"yours":false,"topic_id":1798,"topic_slug":"help-with-renderer-performance","display_username":"Lasse √ñ√∂rni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":10324,"name":"","username":"dragonCASTjosh","avatar_template":"/user_avatar/discourse.urho3d.io/dragoncastjosh/{size}/774_2.png","created_at":"2016-02-22T09:47:08.000Z","cooked":"\u003cp\u003e[quote=‚Äúcadaver‚Äù]If I understand right, you‚Äôre doing a sampling-heavy operation in the G-buffer pass (before lighting), so it would be done for every visible pixel of every solid object.\u003c/p\u003e\n\u003cp\u003eBoth the good and the bad news is that there should be nothing Urho-specific in optimizing that. Can‚Äôt help you more specifically.[/quote]\u003c/p\u003e\n\u003cp\u003eyou are correct about how the affect works, do you have any suggestions on better places to implement IBL within Urho‚Äôs shader pipleine\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:10:15.653Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":11,"readers_count":10,"score":2.2,"yours":false,"topic_id":1798,"topic_slug":"help-with-renderer-performance","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":284,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":10328,"name":"Lasse √ñ√∂rni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-02-22T10:13:50.000Z","cooked":"\u003cp\u003eIf it needs material properties that are not stored into the G-buffer, then I can‚Äôt see other places for it. Otherwise you could do the heavy sampling in a fullscreen quad postprocess pass, it maybe has better sampling coherency, or then maybe not.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T01:10:15.921Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":1798,"topic_slug":"help-with-renderer-performance","display_username":"Lasse √ñ√∂rni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":10329,"name":"","username":"dragonCASTjosh","avatar_template":"/user_avatar/discourse.urho3d.io/dragoncastjosh/{size}/774_2.png","created_at":"2016-02-22T10:16:08.000Z","cooked":"\u003caside class=\"quote\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/cadaver/40/3_1.png\" class=\"avatar\"\u003e cadaver:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf it needs material properties that are not stored into the G-buffer, then I can‚Äôt see other places for it. Otherwise you could do the heavy sampling in a fullscreen quad postprocess pass, it maybe has better sampling coherency, or then maybe not.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIll see what i can do with it, id likely need to add roughness to the G-Buffer for it to work but roughness is fairly common in the G-Buffer these days\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-01-02T01:10:15.980Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":1798,"topic_slug":"help-with-renderer-performance","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":284,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":10333,"name":"hd_","username":"hdunderscore","avatar_template":"/user_avatar/discourse.urho3d.io/hdunderscore/{size}/1151_2.png","created_at":"2016-02-22T14:30:43.000Z","cooked":"\u003cp\u003eI believe you missed the key idea of the approach. The idea for the ‚ÄòPrefilterEnvMap‚Äô and also the ‚ÄòIntegrateBRDF‚Äô functions are for them to be precomputed offline. The referenced paper is ambiguous by not providing example usage of the prefiltered cubemaps, but mentions the key on this line:\u003c/p\u003e\n\u003cp\u003e[quote]\u003ca href=\"http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\" data-bbcode=\"true\" rel=\"nofollow noopener\"\u003ehttp://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\u003c/a\u003e\u003cbr\u003e\nWe pre-calculate the first sum for different roughness values and store the results in the mip-map levels of a cubemap. This is the typical approach used by much of the game industry [1, 9].[/quote]\u003c/p\u003e\n\u003cp\u003eThe citations:\u003c/p\u003e\n\u003cp\u003e[quote][1] AMD, CubeMapGen: Cubemap Filtering and Mipchain Generation Tool. \u003ca href=\"http://developer.amd\" rel=\"nofollow noopener\"\u003edeveloper.amd\u003c/a\u003e.\u003cbr\u003e\ncom/resources/archive/archived-tools/gpu-tools-archive/cubemapgen/\u003cbr\u003e\n[9] Hoffman, Naty, ?Background: Physics and Math of Shading?, part of ?Physically Based Shading\u003cbr\u003e\nin Theory and Practice?, SIGGRAPH 2013 Course Notes. \u003ca href=\"http://blog.selfshadow.com/publications/s2013-shading-course/\" rel=\"nofollow noopener\"\u003eblog.selfshadow.com/publications ‚Ä¶ ng-course/\u003c/a\u003e[/quote]\u003c/p\u003e\n\u003cp\u003eHere are tools that do a similar task:\u003cbr\u003e\n\u003ca href=\"https://seblagarde.wordpress.com/2012/06/10/amd-cubemapgen-for-physically-based-rendering/\" rel=\"nofollow noopener\"\u003eseblagarde.wordpress.com/2012/0 ‚Ä¶ rendering/\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://github.com/dariomanesku/cmft\" rel=\"nofollow noopener\"\u003egithub.com/dariomanesku/cmft\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe slides hints at how to use the prefiltered map (page 12): \u003ca href=\"http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_slides.pdf\" rel=\"nofollow noopener\"\u003eblog.selfshadow.com/publications ‚Ä¶ slides.pdf\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eHere is a useful post on using prefiltered cubemaps: \u003ca href=\"https://seblagarde.wordpress.com/2011/08/17/hello-world/\" rel=\"nofollow noopener\"\u003eseblagarde.wordpress.com/2011/0 ‚Ä¶ llo-world/\u003c/a\u003e\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2017-01-02T01:10:16.290Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":11,"readers_count":10,"score":2.2,"yours":false,"topic_id":1798,"topic_slug":"help-with-renderer-performance","display_username":"hd_","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://seblagarde.wordpress.com/2011/08/17/hello-world/","internal":false,"reflection":false,"clicks":1},{"url":"https://github.com/dariomanesku/cmft","internal":false,"reflection":false,"title":"GitHub - dariomanesku/cmft: Cross-platform open-source command-line cubemap filtering tool.","clicks":0},{"url":"http://developer.amd","internal":false,"reflection":false,"clicks":0},{"url":"http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf","internal":false,"reflection":false,"clicks":0},{"url":"http://blog.selfshadow.com/publications/s2013-shading-course/","internal":false,"reflection":false,"title":"SIGGRAPH 2013 Course: Physically Based Shading in Theory and Practice - Self Shadow","clicks":0},{"url":"https://seblagarde.wordpress.com/2012/06/10/amd-cubemapgen-for-physically-based-rendering/","internal":false,"reflection":false,"clicks":0},{"url":"http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_slides.pdf","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":"Contributor","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":114,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":10334,"name":"","username":"dragonCASTjosh","avatar_template":"/user_avatar/discourse.urho3d.io/dragoncastjosh/{size}/774_2.png","created_at":"2016-02-22T15:18:58.000Z","cooked":"\u003cp\u003e[quote=‚Äúhd_‚Äù]I believe you missed the key idea of the approach. The idea for the ‚ÄòPrefilterEnvMap‚Äô and also the ‚ÄòIntegrateBRDF‚Äô functions are for them to be precomputed offline. The referenced paper is ambiguous by not providing example usage of the prefiltered cubemaps, but mentions the key on this line:\u003c/p\u003e\n\u003cp\u003e[quote]\u003ca href=\"http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\" data-bbcode=\"true\"\u003ehttp://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\u003c/a\u003e\u003cbr\u003e\nWe pre-calculate the first sum for different roughness values and store the results in the mip-map levels of a cubemap. This is the typical approach used by much of the game industry [1, 9].[/quote]\u003c/p\u003e\n\u003cp\u003eThe citations:\u003c/p\u003e\n\u003cp\u003e[quote][1] AMD, CubeMapGen: Cubemap Filtering and Mipchain Generation Tool. \u003ca href=\"http://developer.amd\"\u003edeveloper.amd\u003c/a\u003e.\u003cbr\u003e\ncom/resources/archive/archived-tools/gpu-tools-archive/cubemapgen/\u003cbr\u003e\n[9] Hoffman, Naty, ?Background: Physics and Math of Shading?, part of ?Physically Based Shading\u003cbr\u003e\nin Theory and Practice?, SIGGRAPH 2013 Course Notes. \u003ca href=\"http://blog.selfshadow.com/publications/s2013-shading-course/\"\u003eblog.selfshadow.com/publications ‚Ä¶ ng-course/\u003c/a\u003e[/quote]\u003c/p\u003e\n\u003cp\u003eHere are tools that do a similar task:\u003cbr\u003e\n\u003ca href=\"https://seblagarde.wordpress.com/2012/06/10/amd-cubemapgen-for-physically-based-rendering/\"\u003eseblagarde.wordpress.com/2012/0 ‚Ä¶ rendering/\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://github.com/dariomanesku/cmft\"\u003egithub.com/dariomanesku/cmft\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe slides hints at how to use the prefiltered map (page 12): \u003ca href=\"http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_slides.pdf\"\u003eblog.selfshadow.com/publications ‚Ä¶ slides.pdf\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eHere is a useful post on using prefiltered cubemaps: \u003ca href=\"https://seblagarde.wordpress.com/2011/08/17/hello-world/\"\u003eseblagarde.wordpress.com/2011/0 ‚Ä¶ llo-world/\u003c/a\u003e[/quote]\u003c/p\u003e\n\u003cp\u003eI guess i did miss the point thinks for noticing, ill look into the resources you linked to see what i can do\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2017-01-02T01:10:16.396Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":1798,"topic_slug":"help-with-renderer-performance","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf","internal":false,"reflection":false,"clicks":1},{"url":"http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_slides.pdf","internal":false,"reflection":false,"clicks":0},{"url":"https://seblagarde.wordpress.com/2011/08/17/hello-world/","internal":false,"reflection":false,"title":"Adopting a physically based shading model | S√©bastien Lagarde","clicks":0},{"url":"http://developer.amd","internal":false,"reflection":false,"clicks":0},{"url":"http://blog.selfshadow.com/publications/s2013-shading-course/","internal":false,"reflection":false,"title":"SIGGRAPH 2013 Course: Physically Based Shading in Theory and Practice - Self Shadow","clicks":0},{"url":"https://seblagarde.wordpress.com/2012/06/10/amd-cubemapgen-for-physically-based-rendering/","internal":false,"reflection":false,"title":"AMD Cubemapgen for physically based rendering | S√©bastien Lagarde","clicks":0},{"url":"https://github.com/dariomanesku/cmft","internal":false,"reflection":false,"title":"GitHub - dariomanesku/cmft: Cross-platform open-source command-line cubemap filtering tool.","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":284,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":10384,"name":"","username":"boberfly","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/aeb1de/{size}.png","created_at":"2016-02-24T09:57:24.000Z","cooked":"\u003caside class=\"quote\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/dragoncastjosh/40/774_1.png\" class=\"avatar\"\u003e dragonCASTjosh:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e[quote=‚Äúcadaver‚Äù]If it needs material properties that are not stored into the G-buffer, then I can‚Äôt see other places for it. Otherwise you could do the heavy sampling in a fullscreen quad postprocess pass, it maybe has better sampling coherency, or then maybe not.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIll see what i can do with it, id likely need to add roughness to the G-Buffer for it to work but roughness is fairly common in the G-Buffer these days[/quote]\u003c/p\u003e\n\u003cp\u003eJust to note doing heavy stuff in the g-buffer is bad because you don‚Äôt have a z pre-pass like you might have with a forward renderer (z pre-pass helps performance with heavy pixel/fragment shaders as the rasterizer doesn‚Äôt need to draw occluded surfaces by depth-testing against the zbuffer first), so the lighter the g-buffer is in terms of pixel/fragment shader complexity the better. It‚Äôs why cadaver suggested doing the complexity in a fullscreen quad (and just read the g-buffer‚Äôs data for your lighting inputs).\u003c/p\u003e\n\u003cp\u003eThe only lighting stuff I‚Äôd put in a g-buffer would be baked stuff like UV lightmaps, which need to be with the scene pass to map onto UVs.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2017-01-02T01:10:20.003Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":9,"readers_count":8,"score":1.8,"yours":false,"topic_id":1798,"topic_slug":"help-with-renderer-performance","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":69,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[10309,10310,10311,10320,10324,10328,10329,10333,10334,10384]},"timeline_lookup":[[1,2466],[10,2464]],"suggested_topics":[{"id":7083,"title":"Using custom models in Xamarin.Forms shared project","fancy_title":"Using custom models in Xamarin.Forms shared project","slug":"using-custom-models-in-xamarin-forms-shared-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-03T08:34:21.895Z","last_posted_at":"2021-12-03T11:40:30.983Z","bumped":true,"bumped_at":"2021-12-03T11:40:30.983Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":198,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1493,"username":"Nikolai","name":"Nikolai Miroshnichenko","avatar_template":"/user_avatar/discourse.urho3d.io/nikolai/{size}/3632_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7098,"title":"Cartoon Fire Effect","fancy_title":"Cartoon Fire Effect","slug":"cartoon-fire-effect","posts_count":6,"reply_count":0,"highest_post_number":6,"image_url":null,"created_at":"2021-12-10T04:08:49.887Z","last_posted_at":"2021-12-12T02:49:51.076Z","bumped":true,"bumped_at":"2021-12-12T02:49:51.076Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":274,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7104,"title":"Bug in my partial-model copying code","fancy_title":"Bug in my partial-model copying code","slug":"bug-in-my-partial-model-copying-code","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5367e370779d64989e5c3ff2c1ebfb0689908c87.png","created_at":"2021-12-17T03:50:19.405Z","last_posted_at":"2021-12-17T13:50:49.662Z","bumped":true,"bumped_at":"2021-12-17T13:50:49.662Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7125,"title":"Android mobile shows jaggies in the instersection plane-terrain","fancy_title":"Android mobile shows jaggies in the instersection plane-terrain","slug":"android-mobile-shows-jaggies-in-the-instersection-plane-terrain","posts_count":5,"reply_count":3,"highest_post_number":5,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d36aedb4e8cf5409efca6c976aae7e4a5c499eb9.png","created_at":"2022-01-11T11:59:18.993Z","last_posted_at":"2022-01-11T21:27:40.692Z","bumped":true,"bumped_at":"2022-01-12T07:36:41.695Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":129,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]}],"tags_descriptions":{},"id":1798,"title":"Help with Renderer Performance","fancy_title":"Help with Renderer Performance","posts_count":10,"created_at":"2016-02-21T22:15:30.000Z","views":452,"reply_count":0,"like_count":0,"last_posted_at":"2016-02-24T09:57:24.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"help-with-renderer-performance","category_id":10,"word_count":1570,"deleted_at":null,"user_id":284,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1798","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":10,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":5,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":284,"username":"dragonCASTjosh","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dragoncastjosh/{size}/774_2.png","post_count":5,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":3},{"id":3,"username":"cadaver","name":"Lasse √ñ√∂rni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":69,"username":"boberfly","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/aeb1de/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":114,"username":"hdunderscore","name":"hd_","avatar_template":"/user_avatar/discourse.urho3d.io/hdunderscore/{size}/1151_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":151,"username":"sabotage3d","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":284,"username":"dragonCASTjosh","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dragoncastjosh/{size}/774_2.png"},"last_poster":{"id":69,"username":"boberfly","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/aeb1de/{size}.png"},"links":[{"url":"http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":284,"domain":"blog.selfshadow.com","root_domain":"selfshadow.com"},{"url":"https://seblagarde.wordpress.com/2011/08/17/hello-world/","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":114,"domain":"seblagarde.wordpress.com","root_domain":"wordpress.com"}]}}