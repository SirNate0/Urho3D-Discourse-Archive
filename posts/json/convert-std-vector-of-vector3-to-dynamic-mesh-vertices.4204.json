{"post_stream":{"posts":[{"id":24406,"name":"","username":"Devy","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/b77776/{size}.png","created_at":"2018-04-30T20:48:14.980Z","cooked":"\u003cp\u003eI‚Äôm hoping the other code will be unnecessary, but I‚Äôm trying to convert a std::vector full of Urho3D Vector3‚Äôs to an array that will be used in a dynamic mesh then a model.\u003c/p\u003e\n\u003cp\u003eHere‚Äôs my relevant code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e        const unsigned numVertices = vertices.size();\n\n        std::vector\u0026lt;float\u0026gt; vertexData;\n        \n        for (int i=0; i \u0026lt; numVertices; i++){\n            vertexData.push_back(vertices[i].xyz.x_);\n            vertexData.push_back(vertices[i].xyz.y_);\n            vertexData.push_back(vertices[i].xyz.z_);\n\n            vertexData.push_back(vertices[i].normal.x_);\n            vertexData.push_back(vertices[i].normal.y_);\n            vertexData.push_back(vertices[i].normal.z_);\n        }\n\n        SharedPtr\u0026lt;Model\u0026gt; fromScratchModel(new Model(context_));\n        SharedPtr\u0026lt;VertexBuffer\u0026gt; vb(new VertexBuffer(context_));\n        SharedPtr\u0026lt;IndexBuffer\u0026gt; ib(new IndexBuffer(context_));\n        SharedPtr\u0026lt;Geometry\u0026gt; geom(new Geometry(context_));\n\n        // Shadowed buffer needed for raycasts to work, and so that data can be automatically restored on device loss\n        vb-\u0026gt;SetShadowed(true);\n        // We could use the \"legacy\" element bitmask to define elements for more compact code, but let's demonstrate\n        // defining the vertex elements explicitly to allow any element types and order\n        PODVector\u0026lt;VertexElement\u0026gt; elements;\n        elements.Push(VertexElement(TYPE_VECTOR3, SEM_POSITION));\n        elements.Push(VertexElement(TYPE_VECTOR3, SEM_NORMAL));\n        vb-\u0026gt;SetSize(numVertices, elements);\n        vb-\u0026gt;SetData(vertexData.data());\n\n        ib-\u0026gt;SetShadowed(true);\n        ib-\u0026gt;SetSize(numVertices, false);\n        ib-\u0026gt;SetData(indices.data());\n\n        geom-\u0026gt;SetVertexBuffer(0, vb);\n        geom-\u0026gt;SetIndexBuffer(ib);\n        geom-\u0026gt;SetDrawRange(TRIANGLE_LIST, 0, numVertices);\n\n        fromScratchModel-\u0026gt;SetNumGeometries(1);\n        fromScratchModel-\u0026gt;SetGeometry(0, 0, geom);\n        fromScratchModel-\u0026gt;SetBoundingBox(BoundingBox(Vector3(-0.5f, -0.5f, -0.5f), Vector3(0.5f, 0.5f, 0.5f)));\n\n        Node* node = scene_-\u0026gt;CreateChild(\"FromScratchObject\");\n        node-\u0026gt;SetPosition(Vector3(0.0f, 3.0f, 0.0f));\n        auto* object = node-\u0026gt;CreateComponent\u0026lt;StaticModel\u0026gt;();\n        object-\u0026gt;SetModel(fromScratchModel);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere‚Äôs where I got my idea for putting the vertices in a float std::vector: \u003ca href=\"https://github.com/urho3d/Urho3D/blob/218e4d7592cf8681001e795cac6672fb29fb156a/Source/Samples/34_DynamicGeometry/DynamicGeometry.cpp#L168\" rel=\"nofollow noopener\"\u003ehttps://github.com/urho3d/Urho3D/blob/218e4d7592cf8681001e795cac6672fb29fb156a/Source/Samples/34_DynamicGeometry/DynamicGeometry.cpp#L168\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eTo explain my above code: A have a std::vector full of Urho3D Vector3‚Äôs and I want to convert them to something that a dynamic mesh can use, and to do this I put each vector‚Äôs components into a std::vector of floats that will later be used as an array. From the link, it looks like you are supposed to put the vertex data into an array like so: Vector3.x, Vector3.y, Vector3.z, normal.x, normal.y, normal.z then you do the same for the next 6 indexes.\u003c/p\u003e\n\u003cp\u003eMy problem is that I am not getting a mesh that is correct (I can upload a picture). I‚Äôm wondering if the way I‚Äôm doing all of this is correct, or maybe I should go review my code that generates the original Vector3 std::vector. The part I‚Äôm most concerned with is the for-loop at the very top of the code.\u003c/p\u003e\n\u003cp\u003eThanks for any help, please ask for clarification on anything!\u003c/p\u003e\n\u003cp\u003eTAGS: procedural, dynamic, mesh, vertices, vertex, list, vector, array, bounding, box, bounding-box, convert, conversion.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-05-01T07:26:03.610Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":11,"reads":34,"readers_count":33,"score":61.8,"yours":false,"topic_id":4204,"topic_slug":"convert-std-vector-of-vector3-to-dynamic-mesh-vertices","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/blob/218e4d7592cf8681001e795cac6672fb29fb156a/Source/Samples/34_DynamicGeometry/DynamicGeometry.cpp#L168","internal":false,"reflection":false,"title":"Urho3D/DynamicGeometry.cpp at 218e4d7592cf8681001e795cac6672fb29fb156a ¬∑ urho3d/Urho3D ¬∑ GitHub","clicks":4}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":749,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":24407,"name":"","username":"Devy","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/b77776/{size}.png","created_at":"2018-05-01T07:23:01.152Z","cooked":"\u003cp\u003eTurns out I was not using the right number for the number of indices my mesh needed. After using the correct number my code looks like so (also added an array used for the bounding box):\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e        unsigned numVertices = vertices.size();\n        unsigned numIndices = indices.size();\n\n        std::vector\u0026lt;float\u0026gt; vertexData;\n        Vector3 vert_array[numVertices];\n        \n        for (int i=0; i \u0026lt; numVertices; i++){\n            vertexData.push_back(vertices[i].xyz.x_);\n            vertexData.push_back(vertices[i].xyz.y_);\n            vertexData.push_back(vertices[i].xyz.z_);\n            vert_array[i] = vertices[i].xyz;\n\n            vertexData.push_back(vertices[i].normal.x_);\n            vertexData.push_back(vertices[i].normal.y_);\n            vertexData.push_back(vertices[i].normal.z_);\n        }\n\n        SharedPtr\u0026lt;Model\u0026gt; fromScratchModel(new Model(context_));\n        SharedPtr\u0026lt;VertexBuffer\u0026gt; vb(new VertexBuffer(context_));\n        SharedPtr\u0026lt;IndexBuffer\u0026gt; ib(new IndexBuffer(context_));\n        SharedPtr\u0026lt;Geometry\u0026gt; geom(new Geometry(context_));\n\n        // Shadowed buffer needed for raycasts to work, and so that data can be automatically restored on device loss\n        vb-\u0026gt;SetShadowed(true);\n        // We could use the \"legacy\" element bitmask to define elements for more compact code, but let's demonstrate\n        // defining the vertex elements explicitly to allow any element types and order\n        PODVector\u0026lt;VertexElement\u0026gt; elements;\n        elements.Push(VertexElement(TYPE_VECTOR3, SEM_POSITION));\n        elements.Push(VertexElement(TYPE_VECTOR3, SEM_NORMAL));\n        vb-\u0026gt;SetSize(numVertices, elements);\n        vb-\u0026gt;SetData(\u0026amp;vertexData[0]);\n        \n\n        ib-\u0026gt;SetShadowed(true);\n        ib-\u0026gt;SetSize(numIndices, false);\n        ib-\u0026gt;SetData(\u0026amp;indices[0]);\n\n        geom-\u0026gt;SetVertexBuffer(0, vb);\n        geom-\u0026gt;SetIndexBuffer(ib);\n        geom-\u0026gt;SetDrawRange(TRIANGLE_LIST, 0, numIndices);\n\n        fromScratchModel-\u0026gt;SetNumGeometries(1);\n        fromScratchModel-\u0026gt;SetGeometry(0, 0, geom);\n\n        fromScratchModel-\u0026gt;SetBoundingBox(BoundingBox(vert_array, numVertices));\n\n        \n        Node* node = scene_-\u0026gt;CreateChild(\"FromScratchObject\");\n        node-\u0026gt;SetPosition(Vector3(0.0f, 3.0f, 0.0f));\n        auto* object = node-\u0026gt;CreateComponent\u0026lt;StaticModel\u0026gt;();\n        object-\u0026gt;SetModel(fromScratchModel);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHopefully this can help someone in the future who needs to figure out how to set a bounding box and convert vertices to the correct format for a dynamic mesh.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-05-01T07:24:38.826Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":22,"readers_count":21,"score":9.4,"yours":false,"topic_id":4204,"topic_slug":"convert-std-vector-of-vector3-to-dynamic-mesh-vertices","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":749,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true}],"stream":[24406,24407]},"timeline_lookup":[[1,1667]],"suggested_topics":[{"id":7080,"title":"Build urho3d source on windows 10 - cmake - \"Error in configuration process, project files may be invalid\"","fancy_title":"Build urho3d source on windows 10 - cmake - \u0026ldquo;Error in configuration process, project files may be invalid\u0026rdquo;","slug":"build-urho3d-source-on-windows-10-cmake-error-in-configuration-process-project-files-may-be-invalid","posts_count":8,"reply_count":4,"highest_post_number":8,"image_url":null,"created_at":"2021-12-03T01:55:53.267Z","last_posted_at":"2021-12-06T22:46:59.584Z","bumped":true,"bumped_at":"2021-12-06T22:46:59.584Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":324,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7129,"title":"Best Model Import Pipeline as of Jan 2022?","fancy_title":"Best Model Import Pipeline as of Jan 2022?","slug":"best-model-import-pipeline-as-of-jan-2022","posts_count":7,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2022-01-17T09:27:23.432Z","last_posted_at":"2022-01-17T20:37:59.458Z","bumped":true,"bumped_at":"2022-01-17T20:37:59.458Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":170,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"}}]},{"id":7179,"title":"Need help with cusomized PBR renderpath","fancy_title":"Need help with cusomized PBR renderpath","slug":"need-help-with-cusomized-pbr-renderpath","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-02-01T09:04:58.692Z","last_posted_at":"2022-02-03T17:35:34.174Z","bumped":true,"bumped_at":"2022-02-03T17:35:34.174Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":13,"views":205,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster, Accepted Answer","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7115,"title":"Is it possbile to use one billboard for a lens flare?","fancy_title":"Is it possbile to use one billboard for a lens flare?","slug":"is-it-possbile-to-use-one-billboard-for-a-lens-flare","posts_count":17,"reply_count":4,"highest_post_number":17,"image_url":null,"created_at":"2022-01-02T03:10:48.953Z","last_posted_at":"2022-01-03T21:37:51.953Z","bumped":true,"bumped_at":"2022-01-03T21:37:51.953Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7209,"title":"Need Compute Shader for Heightmap Normals Calculation","fancy_title":"Need Compute Shader for Heightmap Normals Calculation","slug":"need-compute-shader-for-heightmap-normals-calculation","posts_count":14,"reply_count":5,"highest_post_number":14,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f3699392311fc006b02311f4ac539017ce2ba760.jpeg","created_at":"2022-02-26T04:46:13.776Z","last_posted_at":"2022-03-10T00:07:52.127Z","bumped":true,"bumped_at":"2022-03-10T00:07:52.127Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":410,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]}],"tags_descriptions":{},"id":4204,"title":"Convert std::vector of Vector3 to dynamic mesh vertices","fancy_title":"Convert std::vector of Vector3 to dynamic mesh vertices","posts_count":2,"created_at":"2018-04-30T20:48:14.887Z","views":430,"reply_count":0,"like_count":0,"last_posted_at":"2018-05-01T07:23:01.152Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"convert-std-vector-of-vector3-to-dynamic-mesh-vertices","category_id":10,"word_count":769,"deleted_at":null,"user_id":749,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4204","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":2,"username":"Devy","excerpt":"Turns out I was not using the right number for the number of indices my mesh needed. After using the correct number my code looks like so (also added an array used for the bounding box): \n        unsigned numVertices = vertices.size();\n        unsigned numIndices = indices.size();\n\n        std::vect\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":749,"username":"Devy","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/b77776/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":749,"username":"Devy","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/b77776/{size}.png"},"last_poster":{"id":749,"username":"Devy","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/b77776/{size}.png"},"links":[{"url":"https://github.com/urho3d/Urho3D/blob/218e4d7592cf8681001e795cac6672fb29fb156a/Source/Samples/34_DynamicGeometry/DynamicGeometry.cpp#L168","title":"Urho3D/DynamicGeometry.cpp at 218e4d7592cf8681001e795cac6672fb29fb156a ¬∑ urho3d/Urho3D ¬∑ GitHub","internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":749,"domain":"github.com","root_domain":"github.com"}]}}