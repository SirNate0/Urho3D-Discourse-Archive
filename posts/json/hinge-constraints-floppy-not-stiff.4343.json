{"post_stream":{"posts":[{"id":25065,"name":"","username":"mechsect","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/76d3ee/{size}.png","created_at":"2018-06-21T09:48:51.049Z","cooked":"\u003cp\u003eHello all‚Ä¶ first post here.\u003c/p\u003e\n\u003cp\u003eI am trying to build a legged creature using constraints to set angles between leg segments. This works but the results are kind of floppy in the physics simulation. I am trying to have stiff leg joints set at exactly the angle I set the hinge too.\u003c/p\u003e\n\u003cp\u003eAny help would be most appreciated.\u003c/p\u003e\n\u003cp\u003eHere‚Äôs code for a leg segment:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\nNode* Hexapod::\nCreateSegment( Node*         aParentSegNode,\n               const Vector3 aParentConstraintOffset,\n               double        aRotFromParent,\n               const String\u0026amp; aName,\n               double        aLen,\n               const Vector3 aAxis,\n               double        aAngle )\n        {\n        auto ballRestitution = 0.75f;\n        auto NewSegNode = aParentSegNode-\u0026gt;CreateChild(aName);\n        NewSegNode-\u0026gt;SetName(aName);\n        //NewSegNode-\u0026gt;Roll(180.0);\n        //NewSegNode-\u0026gt;SetPosition( Vector3(0.5 * aLen, 0.0f, 0.f));\n        Vector3 xoffs;\n        if( aParentConstraintOffset.x_ \u0026gt; 0.0 )\n            xoffs = Vector3(aLen / 2.0, 0, 0);\n        else\n            {\n            xoffs = Vector3(-aLen / 2.0, 0, 0);\n            }\n\n        NewSegNode-\u0026gt;SetPosition( aParentConstraintOffset + xoffs);\n        NewSegNode-\u0026gt;SetRotation(Quaternion(0., aRotFromParent, 0.));\n\n        auto shape = NewSegNode-\u0026gt;CreateComponent\u0026lt;CollisionShape\u0026gt;();\n        // set the collision shape slightly smaller than the bone so ends don't collide.\n        shape-\u0026gt;SetBox(Vector3( 0.9 * aLen, .1, .3));\n\n        auto body = NewSegNode-\u0026gt;CreateComponent\u0026lt;RigidBody\u0026gt;();\n        // Gravity override\n        body-\u0026gt;SetGravityOverride(Vector3(0.0f, -1.0f, 0.0f));\n        //body-\u0026gt;SetRestitution(ballRestitution);\n        body-\u0026gt;SetRestitution(0.);      // legs shouldn't bounce\n        // Set mass to make movable\n        body-\u0026gt;SetMass(1.0f);\n        body-\u0026gt;SetFriction(2.0f);\n        // Set damping parameters to smooth out the motion\n        body-\u0026gt;SetLinearDamping(0.05f);\n        body-\u0026gt;SetAngularDamping(0.85f);\n        // Set rest thresholds to ensure the rigid bodies come to rest to not consume CPU endlessly\n        body-\u0026gt;SetLinearRestThreshold(1.5f);\n        body-\u0026gt;SetAngularRestThreshold(2.5f);\n\n        auto* constraint = NewSegNode-\u0026gt;CreateComponent\u0026lt;Constraint\u0026gt;();\n        constraint-\u0026gt;SetConstraintType(CONSTRAINT_HINGE);\n        // Most of the constraints will work better when the connected bodies don't collide against each other\n        constraint-\u0026gt;SetDisableCollision(true);\n        // The connected body must be specified before setting the world position\n        constraint-\u0026gt;SetOtherBody(aParentSegNode-\u0026gt;GetComponent\u0026lt;RigidBody\u0026gt;());\n\n        constraint-\u0026gt;SetOtherPosition(aParentConstraintOffset);\n        constraint-\u0026gt;SetPosition(Vector3(-0.5 * aLen,0,0));\n        //constraint-\u0026gt;SetWorldPosition(aParentSegNode-\u0026gt;GetWorldPosition() + aParentConstraintOffset);\n\n        constraint-\u0026gt;SetCFM( 0 );\n        constraint-\u0026gt;SetERP( 0.8 );\n        //std::cerr \u0026lt;\u0026lt; \"CFM *** \" \u0026lt;\u0026lt; constraint-\u0026gt;GetCFM() \u0026lt;\u0026lt; \" ERP \" \u0026lt;\u0026lt; constraint-\u0026gt;GetERP() \u0026lt;\u0026lt; std::endl;\n\n        constraint-\u0026gt;SetAxis(aAxis);\n        constraint-\u0026gt;SetOtherAxis(aAxis);\n        constraint-\u0026gt;SetHighLimit(Vector2(aAngle,0.f));\n        constraint-\u0026gt;SetLowLimit(Vector2(aAngle,0.f));\n\n        return NewSegNode;\n        }\n\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2018-06-21T14:27:14.843Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":28,"reads":46,"readers_count":45,"score":149.2,"yours":false,"topic_id":4343,"topic_slug":"hinge-constraints-floppy-not-stiff","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":4,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1012,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25346,"name":"","username":"mechsect","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/76d3ee/{size}.png","created_at":"2018-07-16T13:03:08.319Z","cooked":"\u003cp\u003eFloppy constraints was most solved by doing the following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003ebtHingeConstraint* btConst = (btHingeConstraint*) constraint-\u0026gt;GetConstraint();\nbtConst-\u0026gt;setOverrideNumSolverIterations(100);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBasically, reach past Urho3D to the underlying Bullet constraint and do more iterations. Not sure if 100 is the right number, but it does make the joints behave as expected.\u003c/p\u003e\n\u003cp\u003eAlso, setting ERP and CRM to 1 and 0 respectively seems right. This is based on:\u003c/p\u003e\n\u003caside class=\"onebox pdf\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://doc.lagout.org/programmation/OpenGL/Learning%20Game%20Physics%20with%20Bullet%20Physics%20and%20OpenGL%20%5BDickinson%202013-10-25%5D.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003edoc.lagout.org\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ca href=\"https://doc.lagout.org/programmation/OpenGL/Learning%20Game%20Physics%20with%20Bullet%20Physics%20and%20OpenGL%20%5BDickinson%202013-10-25%5D.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cspan class=\"pdf-onebox-logo\"\u003e\u003c/span\u003e\u003c/a\u003e\n\u003ch3\u003e\u003ca href=\"https://doc.lagout.org/programmation/OpenGL/Learning%20Game%20Physics%20with%20Bullet%20Physics%20and%20OpenGL%20%5BDickinson%202013-10-25%5D.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003eLearning%20Game%20Physics%20with%20Bullet%20Physics%20and%20OpenGL%20%5BDickinson%202013-10-25%5D.pdf\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp class=\"filesize\"\u003e1939.73 KB\u003c/p\u003e\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\n\u003cp\u003e\"CFM is essentially a measure of the strength of the constraint. A value of 0 means a  perfectly rigid constraint, while increasing values make the constraint more spring like, up to a value of 1where it has no effect at all.\u003c/p\u003e\n\u003cp\u003eERP represents the fraction of how much joint error will be used in the next simulation step. Many constraints could be working in unison to create a complex interaction (imagine a rope bridge, which can be simulated by a attaching a bunch of  springs connected together) and ERP is used to determine how much of the previous data will affect the calculation of future data. This is a difficult concept to explain in such a short space, but imagine that we have multiple constraints acting on the same object, each forcing the others into breaking their own rules. ERP is then the  priority of this constraint relative to the others, and helps determine who has higher importance during these types of complex constraint scenarios.\"\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-07-16T13:03:08.319Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":30,"readers_count":29,"score":71.0,"yours":false,"topic_id":4343,"topic_slug":"hinge-constraints-floppy-not-stiff","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://doc.lagout.org/programmation/OpenGL/Learning%20Game%20Physics%20with%20Bullet%20Physics%20and%20OpenGL%20%5BDickinson%202013-10-25%5D.pdf","internal":false,"reflection":false,"clicks":6}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":1012,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[25065,25346]},"timeline_lookup":[[1,1616],[2,1591]],"suggested_topics":[{"id":7081,"title":"Install Urho3D Library - Windows 10 - rake build - \"project does not exist\"","fancy_title":"Install Urho3D Library - Windows 10 - rake build - \u0026ldquo;project does not exist\u0026rdquo;","slug":"install-urho3d-library-windows-10-rake-build-project-does-not-exist","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-03T03:06:40.974Z","last_posted_at":"2021-12-03T17:53:10.844Z","bumped":true,"bumped_at":"2021-12-03T17:53:10.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":190,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]},{"id":7115,"title":"Is it possbile to use one billboard for a lens flare?","fancy_title":"Is it possbile to use one billboard for a lens flare?","slug":"is-it-possbile-to-use-one-billboard-for-a-lens-flare","posts_count":17,"reply_count":4,"highest_post_number":17,"image_url":null,"created_at":"2022-01-02T03:10:48.953Z","last_posted_at":"2022-01-03T21:37:51.953Z","bumped":true,"bumped_at":"2022-01-03T21:37:51.953Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]},{"id":7125,"title":"Android mobile shows jaggies in the instersection plane-terrain","fancy_title":"Android mobile shows jaggies in the instersection plane-terrain","slug":"android-mobile-shows-jaggies-in-the-instersection-plane-terrain","posts_count":5,"reply_count":3,"highest_post_number":5,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d36aedb4e8cf5409efca6c976aae7e4a5c499eb9.png","created_at":"2022-01-11T11:59:18.993Z","last_posted_at":"2022-01-11T21:27:40.692Z","bumped":true,"bumped_at":"2022-01-12T07:36:41.695Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":129,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]}],"tags_descriptions":{},"id":4343,"title":"Hinge constraints floppy not stiff","fancy_title":"Hinge constraints floppy not stiff","posts_count":2,"created_at":"2018-06-21T09:48:50.943Z","views":507,"reply_count":0,"like_count":2,"last_posted_at":"2018-07-16T13:03:08.319Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"hinge-constraints-floppy-not-stiff","category_id":10,"word_count":595,"deleted_at":null,"user_id":1012,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4343","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1012,"username":"mechsect","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/76d3ee/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":1012,"username":"mechsect","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/76d3ee/{size}.png"},"last_poster":{"id":1012,"username":"mechsect","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/76d3ee/{size}.png"},"links":[{"url":"https://doc.lagout.org/programmation/OpenGL/Learning%20Game%20Physics%20with%20Bullet%20Physics%20and%20OpenGL%20%5BDickinson%202013-10-25%5D.pdf","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":6,"user_id":1012,"domain":"doc.lagout.org","root_domain":"lagout.org"}]}}