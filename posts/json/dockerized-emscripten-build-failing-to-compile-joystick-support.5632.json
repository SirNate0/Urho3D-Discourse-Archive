{"post_stream":{"posts":[{"id":34056,"name":"Mizahnyx","username":"mizahnyx","avatar_template":"/user_avatar/discourse.urho3d.io/mizahnyx/{size}/135_2.png","created_at":"2019-09-28T04:29:31.295Z","cooked":"\u003cp\u003eFirst of all, thank you all for the effort put on this wonderful engine.\u003c/p\u003e\n\u003cp\u003eI just updated both docker images (\u003ccode\u003edocker pull urho3d/dockerized-web\u003c/code\u003e) (\u003ccode\u003edocker pull urho3d/dockerized-native\u003c/code\u003e) and source. Then I tried dockerized native compilation, it went smoothly. Then I tried emscripten dockerized build. Got this error:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eUrho3D/Source/ThirdParty/SDL/src/joystick/emscripten/SDL_sysjoystick.c:193:14: error: implicit declaration of function 'emscripten_sample_gamepad_data' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\nretval = emscripten_sample_gamepad_data();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAny way I can make it build? Also, I never ever have been able to build in the dockerized environment a project (created with rake) outside the main source tree. I tried creating a copy of \u003ccode\u003edockerized.sh\u003c/code\u003e and adding a mount point for the project directory, no luck.\u003c/p\u003e\n\u003cp\u003eThanks in advance!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2019-09-28T04:29:31.295Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":18,"reads":27,"readers_count":26,"score":95.4,"yours":false,"topic_id":5632,"topic_slug":"dockerized-emscripten-build-failing-to-compile-joystick-support","display_username":"Mizahnyx","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":643,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34057,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2019-09-28T06:21:15.399Z","cooked":"\u003cp\u003eI think I may know why. There is one TODO thing at the back of my mind but I have not got time to do it yet which can explain your web build issue. If you are using the convenient shell script \u003ccode\u003escript/dockerized.sh\u003c/code\u003e then by default it won‚Äôt use the \u003ccode\u003e:latest\u003c/code\u003e tag of the docker image. Since the script is designed to track the upstream development of Urho3D, it is scripted to use the tag matching the branch/tag you are in. In your case, unless you have specifically requested to use \u003ccode\u003e:latest\u003c/code\u003e tag, the script uses the \u003ccode\u003e:master\u003c/code\u003e tag instead when you are in master branch. However, the \u003ccode\u003e:master\u003c/code\u003e tag in the docker hub has not been updated yet, i.e. it is still behind the \u003ccode\u003e:latest\u003c/code\u003e tag. That‚Äôs the problem.\u003c/p\u003e\n\u003cp\u003eI will find time to update the \u003ccode\u003e:master\u003c/code\u003e tag in the docker hub later. For the time being you can explicitly request for \u003ccode\u003e:latest\u003c/code\u003e by using this command.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e$ DBE_TAG=:latest script/dockerized.sh web\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSorry for that. Just remember though that latest does not always mean better or correct.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2019-09-28T06:33:50.601Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":25,"readers_count":24,"score":5.0,"yours":false,"topic_id":5632,"topic_slug":"dockerized-emscripten-build-failing-to-compile-joystick-support","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34058,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2019-09-28T15:05:00.721Z","cooked":"\u003cp\u003eI forgot to answer your other question. The DBE is still new. At the moment it does not provide enough support to let user easily build the downstream project just yet, but it is totally possible. I mean our CI has shown one (quick and dirty) way of doing that and there are other ways too, e.g. building your own custom docker image with your custom Urho3D library already built inside it, or modify the convenient script ‚Äúdockerized.sh‚Äù for your own project to also mount a chosen Urho3D built tree from your host, normally known as URHO3D_HOME, so that it can be referenced inside the container when building your own project.\u003c/p\u003e\n\u003cp\u003eBTW, I have updated the tags in the ‚ÄúDocker Hub‚Äù, so the workaround in my earlier post is not needed anymore.\u003c/p\u003e\n\u003cp\u003eEDIT: In case it is still not obvious to you how the CI does it, I have summarized the nutshell as follows. If you don‚Äôt have a new downstream project created yet, you can quickly get one via rake scaffolding task.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e$ rake scaffolding dir=my-downstream-project\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe new project resides inside the Urho3D project root and this is important for the quick and dirty approach. I come back to that later. Modify the skeleton project to your heart‚Äôs content and when you are ready to build it, do this below. This uses a feature that all basic docker user should already know.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e$ script/dockerized.sh web bash\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand you are now in an interactive shell from inside the container! CD to your downstream project and build it as you would have normally done it.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eurho3d@fishtank:/path/to/Urho3D/project/root$ cd my-downstream-project\nurho3d@fishtank:/path/to/Urho3D/project/root/my-downstream-project$ URHO3D_HOME=$(pwd)/../build/web rake cmake web \u0026amp;\u0026amp; rake make web\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd voila! Exit the shell to go back to the host when you are done. This works because the DBE can see and touch anything inside the Urho3D project root directory and since the downstream project is inside this directory then the DBE can freely perform build operation on it too. As a bonus it also can see the parent directory contains a build tree subdir to be denoted as ‚ÄúURHO3D_HOME‚Äù. This is why earlier I said it is important to create the new downstream project inside the Urho3D project root if you take this quick and dirty approach. The other approaches I mentioned in my previous post do not have this restriction.\u003c/p\u003e\n\u003cp\u003eOne last thing. If you do using this quick and dirty approach and you don‚Äôt like to drop into an interactive shell each time you want to build then you are in luck. There is another hidden gem that I believe I haven‚Äôt told anyone anywhere yet. In the Urho3D project root create a new file ‚Äú.rake/my-downstream-project.rake‚Äù. Create the ‚Äú.rake‚Äù subdir if you don‚Äôt have it yet. And put these lines inside the file.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003etask :build do\n  Dir.chdir 'my-downstream-project' do\n    system 'URHO3D_HOME=$(pwd)/../build/web/ rake cmake web \u0026amp;\u0026amp; rake make web' or abort 'Failed to build'\n  end\nend\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen you can build your downstream project by simply typing this one liner at the Urho3D project root.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e$ script/dockerized.sh web rake build\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn the example above I created a new rake task and called it ‚Äúbuild‚Äù. You can substitute that to anything you like.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2019-09-29T14:52:20.920Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":25,"readers_count":24,"score":30.0,"yours":false,"topic_id":5632,"topic_slug":"dockerized-emscripten-build-failing-to-compile-joystick-support","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[34056,34057,34058]},"timeline_lookup":[[1,1152]],"suggested_topics":[{"id":7083,"title":"Using custom models in Xamarin.Forms shared project","fancy_title":"Using custom models in Xamarin.Forms shared project","slug":"using-custom-models-in-xamarin-forms-shared-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-03T08:34:21.895Z","last_posted_at":"2021-12-03T11:40:30.983Z","bumped":true,"bumped_at":"2021-12-03T11:40:30.983Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":198,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1493,"username":"Nikolai","name":"Nikolai Miroshnichenko","avatar_template":"/user_avatar/discourse.urho3d.io/nikolai/{size}/3632_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7104,"title":"Bug in my partial-model copying code","fancy_title":"Bug in my partial-model copying code","slug":"bug-in-my-partial-model-copying-code","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5367e370779d64989e5c3ff2c1ebfb0689908c87.png","created_at":"2021-12-17T03:50:19.405Z","last_posted_at":"2021-12-17T13:50:49.662Z","bumped":true,"bumped_at":"2021-12-17T13:50:49.662Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7115,"title":"Is it possbile to use one billboard for a lens flare?","fancy_title":"Is it possbile to use one billboard for a lens flare?","slug":"is-it-possbile-to-use-one-billboard-for-a-lens-flare","posts_count":17,"reply_count":4,"highest_post_number":17,"image_url":null,"created_at":"2022-01-02T03:10:48.953Z","last_posted_at":"2022-01-03T21:37:51.953Z","bumped":true,"bumped_at":"2022-01-03T21:37:51.953Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]},{"id":7080,"title":"Build urho3d source on windows 10 - cmake - \"Error in configuration process, project files may be invalid\"","fancy_title":"Build urho3d source on windows 10 - cmake - \u0026ldquo;Error in configuration process, project files may be invalid\u0026rdquo;","slug":"build-urho3d-source-on-windows-10-cmake-error-in-configuration-process-project-files-may-be-invalid","posts_count":8,"reply_count":4,"highest_post_number":8,"image_url":null,"created_at":"2021-12-03T01:55:53.267Z","last_posted_at":"2021-12-06T22:46:59.584Z","bumped":true,"bumped_at":"2021-12-06T22:46:59.584Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":324,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]}],"tags_descriptions":{},"id":5632,"title":"Dockerized Emscripten build failing to compile joystick support","fancy_title":"Dockerized Emscripten build failing to compile joystick support","posts_count":3,"created_at":"2019-09-28T04:29:31.241Z","views":310,"reply_count":0,"like_count":1,"last_posted_at":"2019-09-28T15:05:00.721Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"dockerized-emscripten-build-failing-to-compile-joystick-support","category_id":10,"word_count":883,"deleted_at":null,"user_id":643,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_5632","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":4},{"id":643,"username":"mizahnyx","name":"Mizahnyx","avatar_template":"/user_avatar/discourse.urho3d.io/mizahnyx/{size}/135_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":643,"username":"mizahnyx","name":"Mizahnyx","avatar_template":"/user_avatar/discourse.urho3d.io/mizahnyx/{size}/135_2.png"},"last_poster":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}}