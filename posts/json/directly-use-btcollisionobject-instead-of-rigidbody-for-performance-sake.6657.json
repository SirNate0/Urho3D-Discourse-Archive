{"post_stream":{"posts":[{"id":41498,"name":"","username":"CE184","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png","created_at":"2021-01-11T07:35:22.507Z","cooked":"\u003cp\u003eI am testing a large scene with thousands of objects moving around.\u003c/p\u003e\n\u003cp\u003eEach object includes model, material, crowd nav agent. The frame rate is okay.\u003cbr\u003e\nHowever, when I tried to add RigidBody to each object, the frame rate drop hugely. Even if the collision_mask is 0 and mass = 0 (static rigidbody, collide with nothing). I only need those rigidbody (collision shape) for raycast detection. So I believe it‚Äôs wasting a lot of CPU running some unnecessary physics calculation (since there is no raycast added for my test scene).\u003c/p\u003e\n\u003cp\u003eI searched a little bit about bullet physics and found \u003ca href=\"https://pybullet.org/Bullet/phpBB3/viewtopic.php?p=13023\u0026amp;sid=11f3a1ba6d3eb322fed1b625a5fa7da2#p13023\" rel=\"noopener nofollow ugc\"\u003ethis post\u003c/a\u003e. It is suggested to use btCollisionObject directly instead of btRigidBody for such cases. People confirmed this could save a lot of memory.\u003cbr\u003e\nI believe this is the solution for my problem, but I could not find direct usage of btCollisionObject in Urho3D.\u003cbr\u003e\nI am thinking to add one custom component Urho wrapper for it. I was wondering if anyone has done something similar so I don‚Äôt need to do it? or any thoughts?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2021-01-11T07:35:22.507Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":10,"reads":34,"readers_count":33,"score":56.8,"yours":false,"topic_id":6657,"topic_slug":"directly-use-btcollisionobject-instead-of-rigidbody-for-performance-sake","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://pybullet.org/Bullet/phpBB3/viewtopic.php?p=13023\u0026sid=11f3a1ba6d3eb322fed1b625a5fa7da2#p13023","internal":false,"reflection":false,"title":"Performance \"problem\" with large numbers of static objects - Real-Time Physics Simulation Forum","clicks":1}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1384,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41499,"name":"Actually Permanent","username":"throwawayerino","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png","created_at":"2021-01-11T13:08:22.061Z","cooked":"\u003cp\u003eAre you adding physics just for raycasting? Unless I‚Äôm misunderstanding, what prevents you from using octree casts?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2021-01-11T13:08:22.061Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":34,"readers_count":33,"score":11.8,"yours":false,"topic_id":6657,"topic_slug":"directly-use-btcollisionobject-instead-of-rigidbody-for-performance-sake","display_username":"Actually Permanent","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41500,"name":"","username":"CE184","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png","created_at":"2021-01-12T05:19:55.524Z","cooked":"\u003cp\u003eMaybe because it‚Äôs not drawable? That‚Äôs a good question though.\u003cbr\u003e\nFor example, here I have thousands of collision shape (mostly capsule), they are body parts for each objects. During the combat, lots of raycasts are used to detect those weapon hits.\u003c/p\u003e\n\u003cp\u003eFrom your suggestion, I could think a way to make dummy drawables for those collision shapes. But I am not sure if there is any issue for that. We definitely will not render them, but will the octree include them for raycast if it‚Äôs invisible? or do we have LOD/cull mechanism that causes inaccurate result?\u003c/p\u003e\n\u003cp\u003eThe reason why I used rigidbody in the first place is that if the object is hit and dead, I instantly enable the rigidbody so the ragdoll can kick in very easily. But my real requirement is as discussed above: thousands of capsules and hundreds of weapon raycast segemnts each frame to detect hits. What‚Äôs the best way to deal with that in Urho3D in the performance sense?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2021-01-12T05:28:17.999Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":9,"reads":31,"readers_count":30,"score":56.2,"yours":false,"topic_id":6657,"topic_slug":"directly-use-btcollisionobject-instead-of-rigidbody-for-performance-sake","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1384,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41501,"name":"","username":"JSandusky","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","created_at":"2021-01-13T03:18:31.358Z","cooked":"\u003cp\u003e\u003cstrong\u003eCollisions specifically\u003c/strong\u003e:\u003c/p\u003e\n\u003cp\u003eI‚Äôd do it in OpenCL. One kernel to bin into a grid and another to test + write the compacted hits+rayID. CPU side you‚Äôll just sort the hits for each ray because you probably want the nearest one to the ray origin, not sorting on the GPU will keep you from trying to be clever (and shooting yourself in the foot) since sorting is hard there and you‚Äôll likely have a fairly limited number of hits per frame in real cases.\u003c/p\u003e\n\u003cp\u003eIf you only have something like a thousand you can just brute force it in the kernel. Matters of large scale justify the ping-pong with the GPU.\u003c/p\u003e\n\u003cp\u003eAlternatively, do those tests yourself in the job-system so all threads available can attack it. \u003ccode\u003ebtTransformUtil.h\u003c/code\u003e in Bullet contains most of the important math bullet does regarding forces so if there‚Äôs something you need to replicate you can refer to it (I do recommend using the quaternion_derivative instead of the default, the default is really due to more robotics use of bullet and has a rigor you probably don‚Äôt need).\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2021-01-13T03:18:31.358Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":29,"readers_count":28,"score":5.8,"yours":false,"topic_id":6657,"topic_slug":"directly-use-btcollisionobject-instead-of-rigidbody-for-performance-sake","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"CE184","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1358,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[41498,41499,41500,41501]},"timeline_lookup":[[1,681],[3,680],[4,679]],"suggested_topics":[{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7100,"title":"UI Sprites - Wrapping/Repeating Texture","fancy_title":"UI Sprites - Wrapping/Repeating Texture","slug":"ui-sprites-wrapping-repeating-texture","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5d95641f056666c79c67a12520276d2d9f4729ae.png","created_at":"2021-12-15T20:32:37.485Z","last_posted_at":"2021-12-16T03:28:29.146Z","bumped":true,"bumped_at":"2021-12-16T03:28:29.146Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":193,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7105,"title":"Multiple Application.UI Roots?","fancy_title":"Multiple Application.UI Roots?","slug":"multiple-application-ui-roots","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/7/74b10ce575f1b69fe43be4abcb07605d74a1d27c_2_1024x544.jpeg","created_at":"2021-12-20T08:55:14.707Z","last_posted_at":"2021-12-22T02:33:05.795Z","bumped":true,"bumped_at":"2021-12-22T02:33:05.795Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":243,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7065,"title":"Angelscript: Loading a char file into a 2D array: how?","fancy_title":"Angelscript: Loading a char file into a 2D array: how?","slug":"angelscript-loading-a-char-file-into-a-2d-array-how","posts_count":7,"reply_count":4,"highest_post_number":7,"image_url":null,"created_at":"2021-11-24T09:20:05.420Z","last_posted_at":"2021-11-28T11:19:39.689Z","bumped":true,"bumped_at":"2021-11-28T11:26:00.375Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":239,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":983,"username":"tarzeron","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ecae2f/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]}],"tags_descriptions":{},"id":6657,"title":"Directly use btCollisionObject instead of RigidBody for performance sake","fancy_title":"Directly use btCollisionObject instead of RigidBody for performance sake","posts_count":4,"created_at":"2021-01-11T07:35:22.423Z","views":285,"reply_count":2,"like_count":0,"last_posted_at":"2021-01-13T03:18:31.358Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"directly-use-btcollisionobject-instead-of-rigidbody-for-performance-sake","category_id":10,"word_count":562,"deleted_at":null,"user_id":1384,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_6657","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":4,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1384,"username":"CE184","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0}],"created_by":{"id":1384,"username":"CE184","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png"},"last_poster":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"},"links":[{"url":"https://pybullet.org/Bullet/phpBB3/viewtopic.php?p=13023\u0026sid=11f3a1ba6d3eb322fed1b625a5fa7da2#p13023","title":"Performance \"problem\" with large numbers of static objects - Real-Time Physics Simulation Forum","internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":1384,"domain":"pybullet.org","root_domain":"pybullet.org"}]}}