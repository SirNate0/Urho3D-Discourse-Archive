{"post_stream":{"posts":[{"id":13912,"name":"","username":"TheComet","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","created_at":"2016-10-05T23:34:49.000Z","cooked":"\u003cp\u003eIn an effort to understand Urho3D‚Äôs rendering, I‚Äôve decided to try and write my own custom renderpath, technique and shader. My aim right now is to implement simple phong shading with parallax mapping using forward rendering.\u003c/p\u003e\n\u003cp\u003eEverything works, except that it only works for one light. If my scene has 2 (or more) lights, how do I tell Urho to render the scene as many times as there are lights, use a different light every pass, then blend them together?\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"bbcode-b\"\u003eCustom.xml\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;renderpath\u0026gt;\n    \u0026lt;command type=\"clear\" color=\"fog\" depth=\"1.0\" stencil=\"0\" /\u0026gt;\n    \u0026lt;command type=\"scenepass\" pass=\"base\" /\u0026gt;\n    \u0026lt;command type=\"forwardlights\" pass=\"light\" /\u0026gt;\n\u0026lt;/renderpath\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"bbcode-b\"\u003eParallax.xml\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;technique vs=\"Phong_VS\" ps=\"Phong_PS\"\u0026gt;\n    \u0026lt;pass name=\"light\" /\u0026gt;\n\u0026lt;/technique\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eI don‚Äôt think there‚Äôs any need to post Phong_VS.glsl and Phong_PS.glsl at this point, but I should note that I am using \u003cspan class=\"bbcode-b\"\u003ecLightPosPS\u003c/span\u003e and \u003cspan class=\"bbcode-b\"\u003ecLightDirPS\u003c/span\u003e for my lighting calculations, and I am \u003cspan class=\"bbcode-b\"\u003enot\u003c/span\u003e using \u003cspan class=\"bbcode-i\"\u003eGetVertexLight()\u003c/span\u003e.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:14:34.770Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":45,"reads":18,"readers_count":17,"score":228.6,"yours":false,"topic_id":2299,"topic_slug":"multiple-light-passes","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Community repository maintainer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":37,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13920,"name":"Lasse √ñ√∂rni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-10-06T07:38:38.000Z","cooked":"\u003cp\u003eYour minimal technique for forward lighting with multi lights should look like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u0026lt;technique vs=\"MyShader\" ps=\"MyShader\"\u0026gt;\n    \u0026lt;pass name=\"base\" /\u0026gt;\n    \u0026lt;pass name=\"light\" depthtest=\"equal\" depthwrite=\"false\" blend=\"add\" /\u0026gt;\n\u0026lt;/technique\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe light pass will be called for each light by the forwardlights command, and you need to manually configure additive blending for it. Otherwise each light overwrites the previous.\u003cbr\u003e\nYou also need the base pass for the ambient light / absence of any light.\u003c/p\u003e\n\u003cp\u003eThe rendering will use the shader defines PERPIXEL and DIRLIGHT / SPOTLIGHT / POINTLIGHT for the light pass; you can use the absence of these to detect that it should render ambient instead.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:14:35.282Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":3.8,"yours":false,"topic_id":2299,"topic_slug":"multiple-light-passes","display_username":"Lasse √ñ√∂rni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13944,"name":"","username":"TheComet","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","created_at":"2016-10-07T16:09:28.000Z","cooked":"\u003cp\u003eOk cool, got that to work.\u003c/p\u003e\n\u003cp\u003eWhat about multiple passes of the same type in a single technique? For instance, a fur shader will typically render the same object 10-30 times and move each vertex along its normal further every pass. Something like this:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;technique vs=\"Fur_VS\" ps=\"Fur_PS\"\u0026gt;\n    \u0026lt;pass name=\"base\" vsdefines=\"FUR_HEIGHT=0\" /\u0026gt;\n    \u0026lt;pass name=\"litalpha\" depthtest=\"lessequal\" depthwrite=\"true\" blend=\"addalpha\" vsdefines=\"FUR_HEIGHT=1\" /\u0026gt;\n    \u0026lt;pass name=\"litalpha\" depthtest=\"lessequal\" depthwrite=\"true\" blend=\"addalpha\" vsdefines=\"FUR_HEIGHT=2\" /\u0026gt;\n    \u0026lt;pass name=\"litalpha\" depthtest=\"lessequal\" depthwrite=\"true\" blend=\"addalpha\" vsdefines=\"FUR_HEIGHT=3\" /\u0026gt;\n    \u0026lt;pass name=\"litalpha\" depthtest=\"lessequal\" depthwrite=\"true\" blend=\"addalpha\" vsdefines=\"FUR_HEIGHT=4\" /\u0026gt;\n    \u0026lt;pass name=\"litalpha\" depthtest=\"lessequal\" depthwrite=\"true\" blend=\"addalpha\" vsdefines=\"FUR_HEIGHT=5\" /\u0026gt;\n    \u0026lt;pass name=\"litalpha\" depthtest=\"lessequal\" depthwrite=\"true\" blend=\"addalpha\" vsdefines=\"FUR_HEIGHT=6\" /\u0026gt;\n    \u0026lt;pass name=\"litalpha\" depthtest=\"lessequal\" depthwrite=\"true\" blend=\"addalpha\" vsdefines=\"FUR_HEIGHT=7\" /\u0026gt;\n    \u0026lt;pass name=\"litalpha\" depthtest=\"lessequal\" depthwrite=\"true\" blend=\"addalpha\" vsdefines=\"FUR_HEIGHT=8\" /\u0026gt;\n\u0026lt;/technique\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAs far as I can tell, only the last pass and the base pass is being executed and the 7 passes in between are overwritten.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:14:37.043Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":3.8,"yours":false,"topic_id":2299,"topic_slug":"multiple-light-passes","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Community repository maintainer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":37,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13952,"name":"Lasse √ñ√∂rni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-10-08T11:38:22.000Z","cooked":"\u003cp\u003eYou can‚Äôt define a pass with the same name multiple times, as it‚Äôs going to get overwritten. Also, alpha rendering is kind of hardcoded to first render the base pass and then the litalpha pass immediately after, in the objects‚Äô back-to-front order, so I‚Äôm afraid multiple alpha passes with an increasing parameter are not going to work satisfactorily. You could look into the rendering code (View / Batch classes) to see if you can make a tweak into the logic, but I‚Äôm not certain it will be feasible.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:14:37.733Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":18,"readers_count":17,"score":3.6,"yours":false,"topic_id":2299,"topic_slug":"multiple-light-passes","display_username":"Lasse √ñ√∂rni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[13912,13920,13944,13952]},"timeline_lookup":[[1,2239],[3,2238],[4,2237]],"suggested_topics":[{"id":7105,"title":"Multiple Application.UI Roots?","fancy_title":"Multiple Application.UI Roots?","slug":"multiple-application-ui-roots","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/7/74b10ce575f1b69fe43be4abcb07605d74a1d27c_2_1024x544.jpeg","created_at":"2021-12-20T08:55:14.707Z","last_posted_at":"2021-12-22T02:33:05.795Z","bumped":true,"bumped_at":"2021-12-22T02:33:05.795Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":243,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7107,"title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u003cSDL/SDL_gamecontroller.h\u003e","fancy_title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u0026lt;SDL/SDL_gamecontroller.h\u0026gt;","slug":"error-sdl-sdl-gamecontroller-h-no-such-file-or-directory-include-sdl-sdl-gamecontroller-h","posts_count":6,"reply_count":1,"highest_post_number":6,"image_url":null,"created_at":"2021-12-21T15:29:52.810Z","last_posted_at":"2021-12-22T15:32:44.818Z","bumped":true,"bumped_at":"2021-12-22T15:32:44.818Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":271,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7125,"title":"Android mobile shows jaggies in the instersection plane-terrain","fancy_title":"Android mobile shows jaggies in the instersection plane-terrain","slug":"android-mobile-shows-jaggies-in-the-instersection-plane-terrain","posts_count":5,"reply_count":3,"highest_post_number":5,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d36aedb4e8cf5409efca6c976aae7e4a5c499eb9.png","created_at":"2022-01-11T11:59:18.993Z","last_posted_at":"2022-01-11T21:27:40.692Z","bumped":true,"bumped_at":"2022-01-12T07:36:41.695Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":129,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7065,"title":"Angelscript: Loading a char file into a 2D array: how?","fancy_title":"Angelscript: Loading a char file into a 2D array: how?","slug":"angelscript-loading-a-char-file-into-a-2d-array-how","posts_count":7,"reply_count":4,"highest_post_number":7,"image_url":null,"created_at":"2021-11-24T09:20:05.420Z","last_posted_at":"2021-11-28T11:19:39.689Z","bumped":true,"bumped_at":"2021-11-28T11:26:00.375Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":239,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":983,"username":"tarzeron","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ecae2f/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]}],"tags_descriptions":{},"id":2299,"title":"Multiple light passes?","fancy_title":"Multiple light passes?","posts_count":4,"created_at":"2016-10-05T23:34:49.000Z","views":415,"reply_count":0,"like_count":0,"last_posted_at":"2016-10-08T11:38:22.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"multiple-light-passes","category_id":10,"word_count":552,"deleted_at":null,"user_id":37,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_2299","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":4,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":3,"username":"cadaver","name":"Lasse √ñ√∂rni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":37,"username":"TheComet","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":37,"username":"TheComet","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png"},"last_poster":{"id":3,"username":"cadaver","name":"Lasse √ñ√∂rni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png"}}}