{"post_stream":{"posts":[{"id":21983,"name":"Chris Cranford","username":"Naros","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png","created_at":"2017-11-25T11:51:52.026Z","cooked":"\u003cp\u003eIs there a way to extend Urho3D‚Äôs resource system with custom archive types?\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eResourceCache* cache = GetSubsystem\u0026lt;ResourceCache\u0026gt;();\ncache-\u0026gt;BackgroundLoadResource\u0026lt;MapFile\u0026gt;( \"Maps/ArticWonderland.map\" );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe .map file is located inside a proprietary bundle format and I had hoped there was a way I could have wrapped our library using some Urho3D Bundle-like interface that we could register with the ResourceCache system.  Other engines expose similar solutions but I haven‚Äôt yet seen how to do with Urho3D.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-11-25T11:51:52.026Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":60,"reads":40,"readers_count":39,"score":313.0,"yours":false,"topic_id":3783,"topic_slug":"custom-resource-archive-type","display_username":"Chris Cranford","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":876,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21986,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2017-11-25T12:41:35.945Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Naros\" data-post=\"1\" data-topic=\"3783\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/naros/40/2728_2.png\" class=\"avatar\"\u003e Naros:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIs there a way to extend Urho3D‚Äôs resource system with custom archive types?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eDo you want to load Urho resources from this archive?\u003cbr\u003e\nOr it‚Äôs enough for you to load the archive into \u003ccode\u003eMapFile\u003c/code\u003e itself?\u003cbr\u003e\nCode snippet that you posted here should work fine if MapFile is derived from Resource.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-11-25T12:41:35.945Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":2,"reads":39,"readers_count":38,"score":17.8,"yours":false,"topic_id":3783,"topic_slug":"custom-resource-archive-type","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22005,"name":"Chris Cranford","username":"Naros","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png","created_at":"2017-11-25T19:25:44.478Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eDo you want to load Urho resources from this archive?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eYes.\u003c/p\u003e\n\u003cp\u003eFor example, there are \u003cem\u003eXMLFile\u003c/em\u003e resources in this bundle that I would have liked to have been able to simply load by using the standard API as follows\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eXMLFile xml = GetSubsystem\u0026lt;ResourceCache\u0026gt;()-\u0026gt;LoadResource\u0026lt;XMLFile\u0026gt;( \"UI/Constants.xml\" );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eMy hope was that I would be able to supply the \u003cem\u003eResourceCache\u003c/em\u003e with a variety of \u003cem\u003econtainer\u003c/em\u003e implementations and it simply asks these \u003cem\u003econtainers\u003c/em\u003e if a resource by the name exists and if so, the \u003cem\u003econtainer\u003c/em\u003e would then know how to stream the contents into the \u003cem\u003eResource\u003c/em\u003e object.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOr it‚Äôs enough for you to load the archive into \u003ccode\u003eMapFile\u003c/code\u003e itself?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI‚Äôm not sure I understand this.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCode snippet that you posted here should work fine if MapFile is derived from Resource.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eActually, it doesn‚Äôt and reports that the resource cannot be loaded.\u003c/p\u003e\n\u003cp\u003eThis is because \u003ccode\u003eResourceCache\u003c/code\u003e calls \u003ccode\u003eGetFile\u003c/code\u003e that leads to trying to create \u003ccode\u003eFile\u003c/code\u003e object that refers to that path; however it cannot create the \u003ccode\u003eFile\u003c/code\u003e because internally its all based on looking in packages and the file system.  Since that file exists inside a custom bundle file, Urho3D doesn‚Äôt seem to have a way to extend the resource subsystem with custom archive format types.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-11-25T19:25:44.478Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":34,"readers_count":33,"score":11.8,"yours":false,"topic_id":3783,"topic_slug":"custom-resource-archive-type","display_username":"Chris Cranford","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":876,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22007,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2017-11-25T20:27:34.136Z","cooked":"\u003cp\u003eOh, I see now.\u003cbr\u003e\nIt‚Äôs not supported now.\u003cbr\u003e\nHowever, it‚Äôs not hard to add support of this feature.\u003cbr\u003e\nThis may require some tweaking of \u003ccode\u003ePackageFile\u003c/code\u003e and \u003ccode\u003eResourceCache\u003c/code\u003e, but it‚Äôs definetely doable.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eVirtualize \u003ccode\u003ePackageFile\u003c/code\u003e or extract some interface;\u003c/li\u003e\n\u003cli\u003eExtract file creation from \u003ccode\u003eResourceCache::SearchPackages\u003c/code\u003e to \u003ccode\u003ePackageFile\u003c/code\u003e virtual function;\u003c/li\u003e\n\u003cli\u003eSomehow replace \u003ccode\u003eFile\u003c/code\u003e with \u003ccode\u003eAbstractFile\u003c/code\u003e across \u003ccode\u003eResourceCache\u003c/code\u003e because it would be almost impossible to make your custom package return true \u003ccode\u003eFile\u003c/code\u003e. May require some interface changes.\u003c/li\u003e\n\u003cli\u003eThen just add your package to resource cache and load resources.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eDon‚Äôt see any obstacles for now, except some design questions in (3)\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-11-25T20:29:45.151Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":29,"readers_count":28,"score":5.8,"yours":false,"topic_id":3783,"topic_slug":"custom-resource-archive-type","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"reply_to_user":{"username":"Naros","name":"Chris Cranford","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22008,"name":"Chris Cranford","username":"Naros","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png","created_at":"2017-11-25T20:54:24.498Z","cooked":"\u003cp\u003eAwesome, I think this could go a long way for Urho3D users who would like to plug-in a custom resource provider solution that doesn‚Äôt necessarily fit the compressed archive or file-system paradigm.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-11-25T20:54:24.498Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":30,"readers_count":29,"score":11.0,"yours":false,"topic_id":3783,"topic_slug":"custom-resource-archive-type","display_username":"Chris Cranford","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":876,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22010,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2017-11-25T23:27:24.681Z","cooked":"\u003cp\u003eIf you want maintainer(s?) to work on this feature request, please report it on GitHub.\u003cbr\u003e\nIf you are going to do it on your own, good luck and I‚Äôm waiting for PR.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-11-25T23:27:24.681Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":0,"reads":27,"readers_count":26,"score":5.4,"yours":false,"topic_id":3783,"topic_slug":"custom-resource-archive-type","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"reply_to_user":{"username":"Naros","name":"Chris Cranford","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[21983,21986,22005,22007,22008,22010]},"timeline_lookup":[[1,1824],[3,1823]],"suggested_topics":[{"id":7080,"title":"Build urho3d source on windows 10 - cmake - \"Error in configuration process, project files may be invalid\"","fancy_title":"Build urho3d source on windows 10 - cmake - \u0026ldquo;Error in configuration process, project files may be invalid\u0026rdquo;","slug":"build-urho3d-source-on-windows-10-cmake-error-in-configuration-process-project-files-may-be-invalid","posts_count":8,"reply_count":4,"highest_post_number":8,"image_url":null,"created_at":"2021-12-03T01:55:53.267Z","last_posted_at":"2021-12-06T22:46:59.584Z","bumped":true,"bumped_at":"2021-12-06T22:46:59.584Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":324,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7129,"title":"Best Model Import Pipeline as of Jan 2022?","fancy_title":"Best Model Import Pipeline as of Jan 2022?","slug":"best-model-import-pipeline-as-of-jan-2022","posts_count":7,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2022-01-17T09:27:23.432Z","last_posted_at":"2022-01-17T20:37:59.458Z","bumped":true,"bumped_at":"2022-01-17T20:37:59.458Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":170,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7185,"title":"Update Ray ray direction","fancy_title":"Update Ray ray direction","slug":"update-ray-ray-direction","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-02-05T00:28:45.414Z","last_posted_at":"2022-02-05T20:19:51.238Z","bumped":true,"bumped_at":"2022-02-05T20:19:51.238Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7212,"title":"Shadow Gap between Feet and Plane","fancy_title":"Shadow Gap between Feet and Plane","slug":"shadow-gap-between-feet-and-plane","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/8/897538cff25de49fafa7aa77574f822e99576b67_2_1024x686.jpeg","created_at":"2022-03-07T00:04:17.351Z","last_posted_at":"2022-03-07T00:17:57.413Z","bumped":true,"bumped_at":"2022-03-07T00:17:57.413Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}]}],"tags_descriptions":{},"id":3783,"title":"Custom Resource Archive Type","fancy_title":"Custom Resource Archive Type","posts_count":6,"created_at":"2017-11-25T11:51:51.972Z","views":694,"reply_count":2,"like_count":0,"last_posted_at":"2017-11-25T23:27:24.681Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"custom-resource-archive-type","category_id":10,"word_count":514,"deleted_at":null,"user_id":876,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_3783","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":876,"username":"Naros","name":"Chris Cranford","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":876,"username":"Naros","name":"Chris Cranford","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png"},"last_poster":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}}