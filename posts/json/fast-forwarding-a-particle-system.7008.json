{"post_stream":{"posts":[{"id":43548,"name":"J Tippetts","username":"JTippetts1","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png","created_at":"2021-10-13T23:16:01.033Z","cooked":"\u003cp\u003eIs there a way to fast-forward a particle system? I have a project with a number of particle systems emulating material flow through various pipes and ducts, and Iâ€™d like those systems to be well in-progress when the app starts, rather than seeing them start and flow. It seems like you could use ParticleEmitter::Update(FrameInfo), but that method seems to be internal and is not exposed to script. What is the best way to do this that is accessible via Lua?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2021-10-13T23:16:01.033Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":38,"readers_count":37,"score":22.4,"yours":false,"topic_id":7008,"topic_slug":"fast-forwarding-a-particle-system","display_username":"J Tippetts","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":631,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43552,"name":"","username":"JSandusky","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","created_at":"2021-10-16T03:50:30.227Z","cooked":"\u003cp\u003eAdd a warm-starting bool to either the effect or the emitter? During update check the \u003ccode\u003eviewFrameNumber_\u003c/code\u003e to see if the gap is too large for a warm-start system and if so loop the update details until a particle is removed (that should be good enough, once a particle is removed the system should be \u003cem\u003emature\u003c/em\u003e).\u003c/p\u003e\n\u003cp\u003eEdit: the tricky part is going to be the stuff with the period timers. If it becomes a problem you donâ€™t want the fake time per loop to be too small (many loops) or too large (clumping), so that may be yet another tuning or added parameter point.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2021-10-16T04:11:45.697Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":36,"readers_count":35,"score":7.0,"yours":false,"topic_id":7008,"topic_slug":"fast-forwarding-a-particle-system","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1358,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43554,"name":"é­”å¤§å†œ ğğğ³ ç¾æ‹›èœ","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2021-10-17T16:02:35.279Z","cooked":"\u003cp\u003eWhat about a time ma\u003ccode\u003eScene\u003c/code\u003e?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2021-10-17T16:02:35.279Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":35,"readers_count":34,"score":11.8,"yours":false,"topic_id":7008,"topic_slug":"fast-forwarding-a-particle-system","display_username":"é­”å¤§å†œ ğğğ³ ç¾æ‹›èœ","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43556,"name":"","username":"JSandusky","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","created_at":"2021-10-17T23:37:56.930Z","cooked":"\u003cp\u003eIf you mean the multiplier/scale of time that will lead to clumping and mess with other stuff. Unless restoring particle system state from some saved data you have to loop through artificial timesteps to reach a hot state or itâ€™ll just emit all particles but never advance them. (I just settled on \u003ccode\u003e1.0 / GetSubsystem\u0026lt;Engine\u0026gt;()-\u0026gt;GetMinFPS(); // 1/10 if minfps unchanged\u003c/code\u003e for the step)\u003c/p\u003e\n\u003cp\u003eThe hassle is just that you basically have to plug the required functionality into the particle-emitter, otherwise you end up having to add a bunch of extra cruft such as events for when something comes into view for drawing so you can hack in loading some saved particle-state from somewhere. Warm-starting is just much easier to do then adding another set of serialized particle data for first-time-seen and then having to plug in the commensurate GUI/functions to grab the data for it, etc and also less consequential than plugging in more events (particularly for such a common thing as â€¦ \"\u003cem\u003ehey dude! I just came into view!\u003c/em\u003e).\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2021-10-17T23:37:56.930Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":30,"readers_count":29,"score":5.8,"yours":false,"topic_id":7008,"topic_slug":"fast-forwarding-a-particle-system","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Modanung","name":"é­”å¤§å†œ ğğğ³ ç¾æ‹›èœ","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1358,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43557,"name":"","username":"JSandusky","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","created_at":"2021-10-18T00:09:54.166Z","cooked":"\u003cp\u003eI dealt with it by adding a \u003ccode\u003elastViewFrameNumber_\u003c/code\u003e (the comment on viewFrameNumber_ is wrong, itâ€™s not the last one, itâ€™s always the current one by the time you get to update).\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e    bool doWarmStart = false;\n    if (warmStart_ \u0026amp;\u0026amp; lastViewFrameNumber_ \u0026lt; frame.frameNumber_ - 1 \u0026amp;\u0026amp; !CheckActiveParticles())\n    {\n        doWarmStart = true;\n        const float maxStep = GetSubsystem\u0026lt;Engine\u0026gt;()-\u0026gt;GetMinFps(); //default is 10, so 1/10 below in most cases.\n        lastTimeStep_ = Max(lastTimeStep_, 1.0f / maxStep);\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen wrapping the update into a \u003ccode\u003edo { ... } while(emitting_ \u0026amp;\u0026amp; doWarmStart);\u003c/code\u003e, whenever a billboard is set to disabled doWarmStart is then set to false (terminating the loop).\u003c/p\u003e\n\u003cp\u003eWorks dandy on the stock effects Iâ€™ve tried (fire, smoke, etc).\u003c/p\u003e\n\u003cp\u003eDownside over update invisible is that it pops in due to absence of an appropriate bounding box.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2021-10-18T00:14:18.850Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":27,"readers_count":26,"score":5.2,"yours":false,"topic_id":7008,"topic_slug":"fast-forwarding-a-particle-system","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1358,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43943,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2021-12-08T14:22:24.417Z","cooked":"\u003cp\u003eI recently came across the same problem and found a way to do it without changing the engine particle code, though with the caveat that I know exactly when and which particle systems Iâ€™m trying to fast-forward (as I create them in the code right before this). Though this code just runs it for a second in 0.1 second intervals, not checking for a particle disappearing or anything.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003ebool updInv = effect_-\u0026gt;GetUpdateInvisible();\neffect_-\u0026gt;SetUpdateInvisible(true);\nfor (unsigned i = 0; i \u0026lt; 10; ++i)\n{\n\tconstexpr float TS = 0.1f;\n\tauto\u0026amp; map = target-\u0026gt;GetContext()-\u0026gt;GetEventDataMap();\n\tusing namespace ScenePostUpdate;\n\tmap[P_SCENE] = target-\u0026gt;GetScene();\n\tmap[P_TIMESTEP] = TS;\n\t// Need this to get it to \"needUpdate_\" together with the UpdateInvisible.\n\temitter-\u0026gt;OnEvent(target-\u0026gt;GetScene(),E_SCENEPOSTUPDATE,map);\n\tFrameInfo frame{\n\t\ti, TS, {640,480},nullptr\n\t};\n\t// And this to get it to actually animate the particles.\n\temitter-\u0026gt;Update(frame);\n}\neffect_-\u0026gt;SetUpdateInvisible(updInv);\n\u003c/code\u003e\u003c/pre\u003e","post_number":6,"post_type":1,"updated_at":"2021-12-08T14:22:24.417Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":21,"readers_count":20,"score":19.0,"yours":false,"topic_id":7008,"topic_slug":"fast-forwarding-a-particle-system","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43944,"name":"é­”å¤§å†œ ğğğ³ ç¾æ‹›èœ","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2021-12-08T19:13:36.419Z","cooked":"\u003cp\u003eHow about something like this?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid ParticleAccelator(ParticleEmitter* emitter, float time)\n{\n    Node* node{ emitter-\u0026gt;GetNode() };\n    Scene* oven{ new Scene(emitter-\u0026gt;GetContext()) };\n    emitter-\u0026gt;SetNode(oven);\n\n    while (time \u0026gt; .0f)\n    {\n        const float dt{ Min(time, .05f) };\n        oven-\u0026gt;Update(dt);\n        time -= dt;\n    }\n\n    emitter-\u0026gt;SetNode(node);\n    oven-\u0026gt;Remove();\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e(unrun)\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2021-12-08T19:14:14.359Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":18.6,"yours":false,"topic_id":7008,"topic_slug":"fast-forwarding-a-particle-system","display_username":"é­”å¤§å†œ ğğğ³ ç¾æ‹›èœ","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[43548,43552,43554,43556,43557,43943,43944]},"timeline_lookup":[[1,405],[2,403],[3,402],[4,401],[6,350],[7,349]],"suggested_topics":[{"id":7347,"title":"How does Urho handle script objects each frame?","fancy_title":"How does Urho handle script objects each frame?","slug":"how-does-urho-handle-script-objects-each-frame","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-08T02:33:56.461Z","last_posted_at":"2022-11-08T14:46:09.857Z","bumped":true,"bumped_at":"2022-11-08T14:46:09.857Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":64,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7304,"title":"Urho3D is crashing on Android 12","fancy_title":"Urho3D is crashing on Android 12","slug":"urho3d-is-crashing-on-android-12","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-28T10:03:51.280Z","last_posted_at":"2022-07-28T10:03:51.349Z","bumped":true,"bumped_at":"2022-07-28T10:38:06.014Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":126,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7344,"title":"Do we give up supporting dx11ï¼Ÿ","fancy_title":"Do we give up supporting dx11ï¼Ÿ","slug":"do-we-give-up-supporting-dx11","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-03T09:37:37.893Z","last_posted_at":"2022-11-03T13:09:15.153Z","bumped":true,"bumped_at":"2022-11-03T15:28:58.128Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":78,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"é­”å¤§å†œ ğğğ³ ç¾æ‹›èœ","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]},{"id":7062,"title":"Is WebGL2.0 \u0026 GLES3.0 being supported in the near future?","fancy_title":"Is WebGL2.0 \u0026amp; GLES3.0 being supported in the near future?","slug":"is-webgl2-0-gles3-0-being-supported-in-the-near-future","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-11-23T09:04:28.802Z","last_posted_at":"2021-11-23T21:44:08.088Z","bumped":true,"bumped_at":"2021-11-23T21:44:08.088Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":199,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]}],"tags_descriptions":{},"id":7008,"title":"Fast-forwarding a particle system","fancy_title":"Fast-forwarding a particle system","posts_count":7,"created_at":"2021-10-13T23:16:00.967Z","views":360,"reply_count":1,"like_count":2,"last_posted_at":"2021-12-08T19:13:36.419Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"fast-forwarding-a-particle-system","category_id":9,"word_count":687,"deleted_at":null,"user_id":631,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_7008","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":7,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":4,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":192,"username":"Modanung","name":"é­”å¤§å†œ ğğğ³ ç¾æ‹›èœ","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0}],"created_by":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"},"last_poster":{"id":192,"username":"Modanung","name":"é­”å¤§å†œ ğğğ³ ç¾æ‹›èœ","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}}