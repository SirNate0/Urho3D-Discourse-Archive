{"post_stream":{"posts":[{"id":21285,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2017-10-16T14:52:20.679Z","cooked":"\u003cp\u003eI implemented cooperative multitasking for Urho3D. Simply put you can now write code like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-cpp\"\u003e\nvoid TasksSample::MushroomAI()\n{\n    // Implement mushroom logic.\n    const char* mushroomText[] = {\n        \"Q: Mummy, why do all the other kids call me a hairy werewolf?\",\n        \"A: Now stop talking about that and brush your face!\",\n        \"Q: What did one thirsty vampire say to the other as they were passing the morgue?\",\n        \"A: Let‚Äôs stop in for a cool one!\",\n        \"Q: How can you tell if a vampire has a horrible cold?\",\n        \"A: By his deep loud coffin!\",\n        \"Q: What do skeletons say before eating?\",\n        \"A: Bone Appetit!\",\n        \"Q: Why did the vampire get fired from the blood bank?\",\n        \"A: He was caught drinking on the job!\",\n        \"Q: What is a vampire‚Äôs pet peeve?\",\n        \"A: A Tourniquet!\",\n    };\n\n    // This task runs as long as title node exists in a scene.\n    WeakPtr\u0026lt;Node\u0026gt; titleNode(scene_-\u0026gt;GetChild(\"MushroomTitle\", true));\n    for (;!titleNode.Expired();)\n    {\n        auto index = Random(0, SDL_arraysize(mushroomText) / 2);\n        auto text3D = titleNode-\u0026gt;GetComponent\u0026lt;Text3D\u0026gt;();\n\n        // Mushroom says a joke question\n        text3D-\u0026gt;SetText(mushroomText[index * 2]);\n        // And waits for 5 seconds. This does not block rendering.\n        SuspendTask(5.f);\n\n        // After 5 seconds mushroom tells an answer.\n        text3D-\u0026gt;SetText(mushroomText[index * 2 + 1]);\n        SuspendTask(3.f);\n\n        // And after 3 more seconds laughs.\n        text3D-\u0026gt;SetText(\"Hahahahaha!!!\");\n        // Next joke comes after 3 seconds.\n        SuspendTask(3.f);\n\n        // SuspendTask() may be called without arguments. Execution will be resumed on the next frame.\n        SuspendTask();\n    }\n}\n\nvoid TasksSample::SubscribeToEvents()\n{\n    // Create a task that will be scheduled each time E_UPDATE event is fired.\n    GetTasks()-\u0026gt;Create(E_UPDATE, std::bind(\u0026amp;TasksSample::MushroomAI, this));\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eMushroomAI()\u003c/code\u003e code is written as if it executed sequentially and yet \u003ccode\u003eSuspendTask()\u003c/code\u003e calls do not block rendering even though code runs on the main thread. If you wish you may implement task scheduling on other threads as well. It is implemented in a cross-platform and efficient way. On windows it uses fiber API. On unixes it uses ucontext for first context switch and _setjmp/_longjmp for following context switches. No assembly code used.\u003c/p\u003e\n\u003cp\u003eCode:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rokups/Urho3D/blob/master/Source/Urho3D/Core/Tasks.h\" rel=\"nofollow noopener\"\u003eTasks.h\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rokups/Urho3D/blob/master/Source/Urho3D/Core/Tasks.cpp\" rel=\"nofollow noopener\"\u003eTasks.cpp\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rokups/Urho3D/blob/master/Source/Samples/101_Tasks/Tasks.cpp\" rel=\"nofollow noopener\"\u003eFull sample code\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eJoke-telling npc mushroom from the sample:\u003cbr\u003e\n\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/0ba407773bc2df417bcd3b04dd3cde36690cce9c.gif\" alt=\"2\" width=\"640\" height=\"351\"\u003e\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-10-16T14:52:20.679Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":117,"reads":66,"readers_count":65,"score":840.2,"yours":false,"topic_id":3665,"topic_slug":"task-system-coroutines-for-urho3d","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/rokups/Urho3D/blob/master/Source/Samples/101_Tasks/Tasks.cpp","internal":false,"reflection":false,"title":"Urho3D/Tasks.cpp at master ¬∑ rokups/Urho3D ¬∑ GitHub","clicks":40},{"url":"https://github.com/rokups/Urho3D/blob/master/Source/Urho3D/Core/Tasks.h","internal":false,"reflection":false,"title":"Urho3D/Tasks.h at master ¬∑ rokups/Urho3D ¬∑ GitHub","clicks":39},{"url":"https://github.com/rokups/Urho3D/blob/master/Source/Urho3D/Core/Tasks.cpp","internal":false,"reflection":false,"title":"Urho3D/Tasks.cpp at master ¬∑ rokups/Urho3D ¬∑ GitHub","clicks":35}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":9}],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21288,"name":"Trevor Cash","username":"TrevorCash","avatar_template":"/user_avatar/discourse.urho3d.io/trevorcash/{size}/698_2.png","created_at":"2017-10-16T18:30:59.328Z","cooked":"\u003cp\u003eThis looks awesome - can you start tasks with function arguments?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-10-16T18:30:59.328Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":63,"readers_count":62,"score":17.6,"yours":false,"topic_id":3665,"topic_slug":"task-system-coroutines-for-urho3d","display_username":"Trevor Cash","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":792,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21289,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2017-10-16T18:32:01.315Z","cooked":"\u003cp\u003eIt looks great, but I am afraid that it has bad portability among platforms.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-10-16T18:32:01.315Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":63,"readers_count":62,"score":17.6,"yours":false,"topic_id":3665,"topic_slug":"task-system-coroutines-for-urho3d","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21293,"name":"","username":"George1","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png","created_at":"2017-10-17T02:52:04.590Z","cooked":"\u003cp\u003eGreat work.\u003c/p\u003e\n\u003cp\u003eInstead of time out, how can we use this coroutine to wait for a signal or a returned object before continue with the next or subsequence or parallel tasks?\u003c/p\u003e\n\u003cp\u003eThese has lots of application. E.g. parallel path findings, state machines, discrete event etc.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-10-17T02:58:22.142Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":58,"readers_count":57,"score":16.6,"yours":false,"topic_id":3665,"topic_slug":"task-system-coroutines-for-urho3d","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":627,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21295,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2017-10-17T07:18:14.839Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"TrevorCash\" data-post=\"2\" data-topic=\"3665\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/trevorcash/40/698_2.png\" class=\"avatar\"\u003e TrevorCash:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThis looks awesome - can you start tasks with function arguments?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSure, use \u003ccode\u003estd::bind\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-cpp\"\u003evoid MyClass::MyMethod(int val)\n{\n    assert(val == 2);\n}\nGetTasks()-\u0026gt;Create(std::bind(\u0026amp;MyClass::MyMethod, this, 2));\n\u003c/code\u003e\u003c/pre\u003e\n\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"3\" data-topic=\"3665\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt looks great, but I am afraid that it has bad portability among platforms.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWhat do you mean? It would run perfectly on platforms that support ucontext and some version of c standard, which is just about any platform supported by urho. Including MacOS (although it is true that they deprecated ucontext), iOS, Android, raspberry pi, arm/arm64/x86/x64. I am not so sure how it would fare on consoles. One thing that i am sure of - if this does not work on certain platforms then it is not too hard to make it work \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=10\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"\u003e\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"George1\" data-post=\"4\" data-topic=\"3665\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/40.png\" class=\"avatar\"\u003e George1:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eInstead of time out, how can we use this coroutine to wait for a signal or a returned object before continue with the next or subsequence or parallel tasks?\u003c/p\u003e\n\u003cp\u003eThese has lots of application. E.g. parallel path findings, state machines, discrete event etc.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSure you can. What you would do is:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-cpp\"\u003eif (isConditionSet)\n{\n    // signal was received, do things\n}\nSuspendTask();    // Schedule other tasks, resume on next frame.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOr you can manually switch to tasks. API still needs a bit of work to allow sidestepping scheduler completely, but in theory you can totally do \u003ccode\u003etask-\u0026gt;SwitchTo()\u003c/code\u003e, task is scheduled and execution resumes after this method call as soon as task calls \u003ccode\u003eSuspendTask()\u003c/code\u003e.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-10-17T07:18:29.830Z","reply_count":0,"reply_to_post_number":2,"quote_count":3,"incoming_link_count":2,"reads":54,"readers_count":53,"score":20.8,"yours":false,"topic_id":3665,"topic_slug":"task-system-coroutines-for-urho3d","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21297,"name":"","username":"George1","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png","created_at":"2017-10-17T07:52:25.204Z","cooked":"\u003cp\u003eLook great.\u003cbr\u003e\nWhere would you put that signal condition check inside the tasks code so that it execute immediately on signal.\u003cbr\u003e\nCould you make a small sample for this?\u003c/p\u003e\n\u003cp\u003eHow would you do to suspend or interrupt other tasks from a different task?\u003cbr\u003e\nOr could you possible sending object or signal immediately between tasks? For example sending to interrupt and changing task at the current frame.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-10-17T07:52:25.204Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":52,"readers_count":51,"score":15.4,"yours":false,"topic_id":3665,"topic_slug":"task-system-coroutines-for-urho3d","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":627,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21298,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2017-10-17T07:59:38.101Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"George1\" data-post=\"6\" data-topic=\"3665\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/40.png\" class=\"avatar\"\u003e George1:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhere would you put that signal condition check inside the tasks code so that it execute immediately on signal.\u003c/p\u003e\n\u003cp\u003eCould you make a small sample for this?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThat is not how tasks work. Tasks are like micro-threads. If you want task to resume when some signal is sent you probably want to do it manually - receive signal and call \u003ccode\u003etask-\u0026gt;SwitchTo()\u003c/code\u003e which will schedule task.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"George1\" data-post=\"6\" data-topic=\"3665\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/40.png\" class=\"avatar\"\u003e George1:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eHow would you do to suspend or interrupt other tasks from a different task?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSame way as you would do it with threads: set condition variable somewhere and have task check it constantly. You do not want to have and use \u003ccode\u003etask-\u0026gt;Terminate()\u003c/code\u003e for example, because it would free task stack without unwinding it and possibly cause memory leaks.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"George1\" data-post=\"6\" data-topic=\"3665\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/40.png\" class=\"avatar\"\u003e George1:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOr could you possible sending object or signal immediately between tasks? For example sending to interrupt and changing task at the current frame.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYou would have to implement that part. Maybe like some kind of queue that task is constantly checking, getting items from it and processing once you put something in there?\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-10-17T07:59:38.101Z","reply_count":0,"reply_to_post_number":6,"quote_count":1,"incoming_link_count":0,"reads":51,"readers_count":50,"score":10.2,"yours":false,"topic_id":3665,"topic_slug":"task-system-coroutines-for-urho3d","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21299,"name":"","username":"George1","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png","created_at":"2017-10-17T08:09:31.934Z","cooked":"\u003cp\u003eThanks,\u003cbr\u003e\nI‚Äôm just raising a few questions to understand the capability of the implementation.\u003c/p\u003e\n\u003cp\u003eThe reason I‚Äôm asking about interrupt and signal is when you would use it for ai character, where the ai could do multiple tasks concurrently.\u003c/p\u003e\n\u003cp\u003eBest regards\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2017-10-17T08:09:31.934Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":47,"readers_count":46,"score":14.4,"yours":false,"topic_id":3665,"topic_slug":"task-system-coroutines-for-urho3d","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":627,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21300,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2017-10-17T08:21:19.189Z","cooked":"\u003cp\u003eYes, that is exactly the point of task system - doing multiple things at one (but not in parallel).\u003c/p\u003e\n\u003cp\u003eFor example you could have \u003ccode\u003eAttackTask()\u003c/code\u003e which actively looks for enemies around and attacks them.\u003c/p\u003e\n\u003cp\u003eThen you could have \u003ccode\u003eHealTask()\u003c/code\u003e which checks HP every X seconds and consumes healing potions.\u003c/p\u003e\n\u003cp\u003eThen you could have \u003ccode\u003eReactTask()\u003c/code\u003e which would check HP every X seconds and once it reaches 10% or less it would make NPC scream ‚ÄúAHHHH!!!‚Äù and flee.\u003c/p\u003e\n\u003cp\u003eNow logical thing would be to terminate \u003ccode\u003eAttackTask()\u003c/code\u003e when \u003ccode\u003eReactTask()\u003c/code\u003e initiates fleeing. NPC could have \u003ccode\u003estate_\u003c/code\u003e member variable which could be \u003ccode\u003eAGGRESSIVE\u003c/code\u003e or \u003ccode\u003eFRIGHTENED\u003c/code\u003e, and \u003ccode\u003eAttackTask()\u003c/code\u003e then would only make NPC attack if it is in \u003ccode\u003eAGGRESSIVE\u003c/code\u003e state.\u003c/p\u003e\n\u003cp\u003eNot the best AI design but i hope it illustrates how to do things concurrently.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2017-10-17T08:21:19.189Z","reply_count":0,"reply_to_post_number":8,"quote_count":0,"incoming_link_count":0,"reads":48,"readers_count":47,"score":9.6,"yours":false,"topic_id":3665,"topic_slug":"task-system-coroutines-for-urho3d","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21302,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2017-10-17T11:45:32.760Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/george1\"\u003e@George1\u003c/a\u003e i worked on it a bit more and added \u003ccode\u003etask-\u0026gt;Terminate()\u003c/code\u003e method to request task termination. \u003ccode\u003eSuspendTask()\u003c/code\u003e throws exception in the task, this unwinds the stack properly and prevents any memory leaks i mentioned earlier. If exception cost is too high you may manually keep checking \u003ccode\u003etask-\u0026gt;IsTerminating()\u003c/code\u003e before every \u003ccode\u003eSuspendTask()\u003c/code\u003e call and return from the task, avoiding throwing exception.\u003c/p\u003e\n\u003cp\u003eUpdated sample, adding multiple examples to that worker thread function demonstrating how various things work. Also added example on how to manually schedule tasks without using task scheduler.\u003c/p\u003e\n\u003cp\u003eHope you find it useful\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2017-10-17T11:45:32.760Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":45,"readers_count":44,"score":74.0,"yours":false,"topic_id":3665,"topic_slug":"task-system-coroutines-for-urho3d","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[21285,21288,21289,21293,21295,21297,21298,21299,21300,21302]},"timeline_lookup":[[1,1864],[2,1863]],"suggested_topics":[{"id":7120,"title":"Log Error Once Macro","fancy_title":"Log Error Once Macro","slug":"log-error-once-macro","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-01-04T02:24:37.857Z","last_posted_at":"2022-01-04T02:24:37.925Z","bumped":true,"bumped_at":"2022-01-04T02:24:37.925Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":143,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7103,"title":":test_tube: DebugRenderer as GUI","fancy_title":":test_tube: DebugRenderer as GUI","slug":"debugrenderer-as-gui","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-17T02:25:06.606Z","last_posted_at":"2021-12-18T01:09:27.738Z","bumped":true,"bumped_at":"2021-12-18T01:09:27.738Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"üß™ DebugRenderer as GUI","tags_descriptions":{},"like_count":4,"views":267,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7099,"title":":fallen_leaf: Polynomials \u0026 Harmonics","fancy_title":":fallen_leaf: Polynomials \u0026amp; Harmonics","slug":"polynomials-harmonics","posts_count":6,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2021-12-13T05:06:04.641Z","last_posted_at":"2021-12-27T23:27:39.489Z","bumped":true,"bumped_at":"2021-12-27T23:27:39.489Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"üçÇ Polynomials \u0026 Harmonics","tags_descriptions":{},"like_count":6,"views":392,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7110,"title":"Resource fetch define","fancy_title":"Resource fetch define","slug":"resource-fetch-define","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-27T12:28:55.126Z","last_posted_at":"2021-12-27T17:00:37.699Z","bumped":true,"bumped_at":"2021-12-27T17:00:37.699Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":7,"views":184,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7167,"title":":four_leaf_clover: Dry 01","fancy_title":":four_leaf_clover: Dry 01","slug":"dry-01","posts_count":33,"reply_count":26,"highest_post_number":33,"image_url":null,"created_at":"2022-01-29T06:58:35.533Z","last_posted_at":"2022-01-29T14:06:28.195Z","bumped":true,"bumped_at":"2022-01-29T11:09:43.702Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"üçÄ Dry 01","tags_descriptions":{},"like_count":2,"views":422,"category_id":6,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1004,"username":"GoldenThumbs","name":"Golden Thumbs","avatar_template":"/user_avatar/discourse.urho3d.io/goldenthumbs/{size}/1669_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]}],"tags_descriptions":{},"id":3665,"title":"Task system - coroutines for Urho3D","fancy_title":"Task system - coroutines for Urho3D","posts_count":10,"created_at":"2017-10-16T14:52:20.583Z","views":1167,"reply_count":3,"like_count":11,"last_posted_at":"2017-10-17T11:45:32.760Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"task-system-coroutines-for-urho3d","category_id":13,"word_count":1255,"deleted_at":null,"user_id":246,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/0ba407773bc2df417bcd3b04dd3cde36690cce9c.gif","slow_mode_seconds":0,"draft":null,"draft_key":"topic_3665","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":10,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":4,"show_read_indicator":false,"thumbnails":[{"max_width":null,"max_height":null,"width":640,"height":351,"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/0ba407773bc2df417bcd3b04dd3cde36690cce9c.gif"}],"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":246,"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","post_count":5,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":792,"username":"TrevorCash","name":"Trevor Cash","avatar_template":"/user_avatar/discourse.urho3d.io/trevorcash/{size}/698_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":246,"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png"},"last_poster":{"id":246,"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png"},"links":[{"url":"https://github.com/rokups/Urho3D/blob/master/Source/Samples/101_Tasks/Tasks.cpp","title":"Urho3D/Tasks.cpp at master ¬∑ rokups/Urho3D ¬∑ GitHub","internal":false,"attachment":false,"reflection":false,"clicks":40,"user_id":246,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/rokups/Urho3D/blob/master/Source/Urho3D/Core/Tasks.h","title":"Urho3D/Tasks.h at master ¬∑ rokups/Urho3D ¬∑ GitHub","internal":false,"attachment":false,"reflection":false,"clicks":39,"user_id":246,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/rokups/Urho3D/blob/master/Source/Urho3D/Core/Tasks.cpp","title":"Urho3D/Tasks.cpp at master ¬∑ rokups/Urho3D ¬∑ GitHub","internal":false,"attachment":false,"reflection":false,"clicks":35,"user_id":246,"domain":"github.com","root_domain":"github.com"}]}}