Modanung | 2020-03-15 00:53:50 UTC | #1

[![Icon](https://luckeyproductions.nl/images/manawargicon.svg)](https://gitlab.com/luckeyproductions/manawarg)  

A potentially protean world builder for Urho3D and its forks.  

[![Gitter](https://badges.gitter.im/LucKeyProductions/ManaWarg.svg)](https://gitter.im/LucKeyProductions/ManaWarg)

-----

+ ## [Latest build on itch (64-bit Linux)](https://luckeyproductions.itch.io/manawarg)
+ ## [Repository](https://gitlab.com/luckeyproductions/manawarg)
+ ## [Wiki](https://gitlab.com/luckeyproductions/manawarg/wikis/home)  

----
![](https://img.itch.zone/aW1hZ2UvNDc0OTUzLzMwODUyNzMucG5n/original/%2FhZ%2BkY.png)

-------------------------

GoldenThumbs | 2019-08-04 01:57:49 UTC | #2

Looks neat. Can't wait to see what people do with this. Heck, you said you're still working on it? Just that fact makes this interesting.

-------------------------

Modanung | 2019-08-04 03:07:06 UTC | #3

Thanks, I started on it today. I gained some experience working on Edddy combining the two frameworks.  

Now working on a material editor:
![MaterialEditor|330x500](upload://j28cO72H4FHQQl6YKC7i5Ph5AKY.png)

-------------------------

GoldenThumbs | 2019-08-04 03:09:00 UTC | #4

I like it. If you or someone else makes a full editor with this will it be merged with the rest of urho?

-------------------------

Modanung | 2019-08-04 03:15:09 UTC | #5

That *is* one of the goals I hope to help achieve. :)
...for Urho to have at least one native editor (in a separate repository).

-------------------------

Modanung | 2019-08-04 17:29:35 UTC | #6

I'm thinking it might not be such a bad idea to work towards a world builder that has different _modes_. Like a default mode (akin to current Urho editor), grid mode (like Edddy), terrain and planet mode. A bit like Blender's UI layouts, but also changing the available tools and keycuts... like when changing the interaction mode in Blender.

-------------------------

GoldenThumbs | 2019-08-04 19:19:25 UTC | #7

Would be awesome if we could brush based map editing without needing to make our own editor/importer for an existing mapping software.

-------------------------

Modanung | 2019-08-04 19:26:35 UTC | #8

Have you seen [the work](https://discourse.urho3d.io/t/u3d-terrain-editor/765/81?u=modanung) by @JTippetts1?
Qt knowns tablet pressure. :slight_smile:

-------------------------

GoldenThumbs | 2019-08-04 19:28:04 UTC | #9

By brush I mean like a BSP brush, like early ID tech or Source. I find it really useful for blocking out prototype levels.

-------------------------

Modanung | 2019-08-04 19:37:12 UTC | #10

Ah, that would also make an interesting mode that I overlooked indeed. You'd basically be building custom geometry, right? When it comes to BSP I'm more familiar with the early Unreal approach ; the tunneling variant. But I guess that's basically a difference in normals. :slight_smile:

-------------------------

GoldenThumbs | 2019-08-04 19:52:59 UTC | #11

If you really need an idea of the workflow and you have Quake I'd suggest checking out [TrenchBroom](https://kristianduske.com/trenchbroom/). Really good tool that I think is a really awesome example of what a modern quake-like level editor should look like.

-------------------------

Modanung | 2019-08-04 22:30:16 UTC | #12

@GoldenThumbs I intend to focus on the part that "works like Edddy" and hope there will some day be contributions from people like you (mr [BSP](https://en.wikipedia.org/wiki/Binary_space_partitioning) mode) and @JTippetts1 (mr Terrain mode). :slight_smile:

-------------------------

Modanung | 2019-08-05 00:00:43 UTC | #13

This project grew mainly out of my discovery of the [QDockWidget](https://doc.qt.io/qt-5/qdockwidget.html#details). They can be tiled, stacked, floated and closed which allows for a great deal of variety in possible UI layouts.

-------------------------

Modanung | 2019-08-05 11:07:19 UTC | #14

How does **Mana[Warg](https://en.wikipedia.org/wiki/Warg)** sound as a name for this magimythical [colonial organism](https://en.wikipedia.org/wiki/Portuguese_man_o%27_war)? :slight_smile:

Would you accept it as a name of the next official Urho editor? 

[poll type=regular results=always public=true]
* Yes, I like ManaWarg :construction_worker_man:
* Nah, just Urho3D Editor will do :pencil2: 
* Let's go for Urhonator instead! :crazy_face: 
[/poll]

-------------------------

Modanung | 2019-08-05 12:49:47 UTC | #15

Made a logo:
![manawarg|488x420](upload://wapUgw4xL0V88Xk0UFMtbcXFMwA.png)

-------------------------

throwawayerino | 2019-08-05 13:19:47 UTC | #16

The M and G are a bit hard to read. I saw them as N and Q. But the logo itself is good

-------------------------

Modanung | 2019-08-05 13:31:05 UTC | #17

Indeed, as first scribble, it could use some balancing out. Also his tail should be stringier; less fart-like.

-------------------------

Modanung | 2019-08-05 17:49:11 UTC | #18

Renamed repo and created icon:
![manawarg_icon|512x512](https://gitlab.com/luckeyproductions/manawarg/raw/master/icon.svg) 
I think this will guide the next version of the logo as well.

-------------------------

Modanung | 2019-08-05 15:50:32 UTC | #19

4 posts were split to a new topic: [The Urho3D logo](/t/the-urho3d-logo/5411)

-------------------------

George1 | 2019-08-05 23:29:40 UTC | #21

The fish is now alive with that logo.
Looks great.

-------------------------

Modanung | 2019-08-05 23:59:59 UTC | #22

![UrhoWarg|583x499](upload://tfZJIaThDRaWzgIsQk3jVQJmKmV.png)

-------------------------

Modanung | 2019-08-06 11:19:16 UTC | #23

Uniform anyone? --- ;)

[![Front|300x300](https://i3.cpcache.com/merchandise/152_480x480_Front_Color-Black.png?region={%22id%22:118350360,%22name%22:%22FrontCenter%22,%22width%22:10.0,%22height%22:10.0,%22orientation%22:0,%22crop_x%22:0.0,%22crop_y%22:0.0,%22crop_w%22:1000.0,%22crop_h%22:1000.0,%22scale%22:1.0,%22dpi%22:100,%22template%22:{%22id%22:118350360,%22params%22:{}}})![Back|300x300](https://i3.cpcache.com/merchandise/152_480x480_Back_Color-Black.png?region={%22id%22:118350361,%22name%22:%22BackCenter%22,%22width%22:10.0,%22height%22:10.0,%22orientation%22:0,%22crop_x%22:0.0,%22crop_y%22:0.0,%22crop_w%22:1000.0,%22crop_h%22:1000.0,%22scale%22:1.0,%22dpi%22:100,%22template%22:{%22id%22:118350361,%22params%22:{}}})](https://www.cafepress.com/cp/customize/product.aspx?number=458925554)

-------------------------

Sinoid | 2019-08-06 04:54:38 UTC | #24

I have heaps of Quake map parsing and plane-bounded-volume code if you want it. Though it's all in FixedPoint (Q31.32) it should be trivial to port over (changed FixedVector3 to Vector3, etc). Really, the big deal is the winding handling, even though that stuff is well documented since the 80s and basically everyone does it the same ... it's a complete asshole to write and troubleshoot.

The map parsing stuff is in C#, but stb_c_lexer should do the trick (I load MAP files in C# and emit a compatible binary). IIRC I handle collisions and sliding the same as one of the old *Graphics Gems* books covers it, which is basically the same as quake. So rays, swept spheres, swept boxes, and swept capsules are supported - I handle terrains using Unreal Engine 2's method and record *movers* seperately from the BVH for static hulls.

My handling of Quake3 patches and meshes (the gridded ones, ie. terrains) is garbage nonsense though, I barely understand WTF I was doing there ... it works and loads Quake 3 / COD maps though ... so whatever.

-------------------------

johnnycable | 2019-08-06 14:56:15 UTC | #26

I just figure all those young blonde girls jumping in shouting "Oh, look, what is it?" :space_invader::space_invader::space_invader:

-------------------------

Modanung | 2019-08-08 15:58:13 UTC | #27

When passing a command line argument to ManaWarg it now checks whether it refers to a material that can be loaded and (if it can) will set a MaterialEditor as its central widget, leaving out all other functionality:

![MaterialEditor|636x385](upload://pzMzPc6WWUpClII2x7NOLMDqHj7.png) 

The same should be possible for particle effects, allowing unencumbered resource creation/modification.

-------------------------

suppagam | 2019-08-09 19:59:01 UTC | #28

I like how it looks like ATF: https://github.com/SonyWWS/LevelEditor

Are you planning on using any library for gizmos?

-------------------------

Modanung | 2019-08-09 20:03:21 UTC | #29

I'm using Qt for the widgets and plan to create my own gizmos, if by that you mean 3D transform handles.

...but I'm open to suggestions.

-------------------------

suppagam | 2019-08-09 21:10:17 UTC | #30

Many:

https://github.com/CedricGuillemet/LibGizmo
https://github.com/ddiakopoulos/tinygizmo
https://github.com/BrutPitt/virtualGizmo3D

-------------------------

suppagam | 2019-08-09 21:10:33 UTC | #31

And QML: https://github.com/fferri/qt3d-transform-gizmo

-------------------------

Modanung | 2019-08-09 21:11:19 UTC | #32

About what I expected. No thanks. :slight_smile:

-------------------------

George1 | 2019-08-10 01:45:49 UTC | #33

Just steal the gizmo functionality from rbfx, hehe... .  He has a fork separately for that. Rip off it :wink:

-------------------------

Modanung | 2019-08-10 02:34:51 UTC | #34

Unlikely. :slight_smile: 

![MaterialEditor|329x499](upload://bA1bVgYYbWUDtZIir9TqUlWWQZU.png)

-------------------------

dev4fun | 2019-08-10 19:19:16 UTC | #35

Some personal reason to use GitLab? Btw nice idea, I want to back to Urho3D soon. :slight_smile:

-------------------------

Modanung | 2019-08-11 00:27:19 UTC | #36

[quote="dev4fun, post:35, topic:5403"]
Some personal reason to use GitLab?
[/quote]
Because GitHub seems to have sold us out.
> # _[Microsoft to acquire GitHub for $7.5 billion](https://news.microsoft.com/2018/06/04/microsoft-to-acquire-github-for-7-5-billion/)_

https://blog.github.com/2018-06-04-github-microsoft/

https://github.com/LucKeyProductions/MoveNotice/blob/master/README.md

It's all _git_, just a different upstream domain; a simple Hu->La.

-------------------------

Modanung | 2019-08-11 00:28:51 UTC | #37

And it's good to hear ManaWarg *already* increases your interest in the engine. :slight_smile:

-------------------------

Sinoid | 2019-08-14 02:59:35 UTC | #38

I strongly recommend against LibGizmo, it and ImGuizmo are probably the most absurd pain I've ever tolerated for no gain in a library.

I use [im3d](https://github.com/john-chapman/im3d) myself, with some heavy changes for bounds-extent sizing. It's the only decent one I've come across that splits the inputs.

If a gizmo asks for a complete matrix then the only thing it's good for is a single root object. Value drift makes LibGizmo / ImGuizmo useless for hierarchies in my experience.

-------------------------

Modanung | 2019-08-14 21:12:44 UTC | #39

At first glance, that looks quite solid, thanks! It may be useful.

-------------------------

Sinoid | 2019-08-15 00:40:41 UTC | #40

Here's my implementation for IM3D: https://gist.github.com/JSandusky/7a2d99d60c5ad41962d518afe223c41d

Uses geometry shader, but IIRC there's an OpenGL 3.1 sample for Im3d which doesn't use geometry shaders. Can be rendered from `E_ENDVIEWRENDER`, or by adding it into code like `DebugRenderer` already draws.

Fairly certain there's some broken cludge in there. I recall having previously messed around with doing some alternative manipulators (normal / plane) before opting on just masking out axes of the translate/rotate/scale manipulators.

-------------------------

Modanung | 2019-08-15 01:11:53 UTC | #41

I intend to create something similar with LogicComponents that use billboards for the grips, rendered in a separate scene. Also Blender-style keycuts for grabbing, rotating and scaling. I never use the gizmos in Blender which saves clutter in the viewport as I set it to be hidden.

-------------------------

Sinoid | 2019-08-15 01:48:08 UTC | #42

Using billboards is a really good idea. Then you can just raycast, get the UV coordinates and sample an `Image` for alpha to identify a hit. Wish I'd thought of that before.

-------------------------

Modanung | 2019-08-15 03:47:51 UTC | #43

Rather I was thinking to use the full plane as a hit, to make it less of a precision click, but I will see when I get there.

-------------------------

suppagam | 2019-08-15 15:25:46 UTC | #44

So, like UE?

![image|480x360](upload://6cNyZnB44BnncWGnmMlajxsOI7R.jpeg)

-------------------------

Modanung | 2019-08-15 16:08:48 UTC | #45

Like ManaWarg. :slight_smile:

-------------------------

Modanung | 2019-08-21 11:48:21 UTC | #46

ManaWarg now has HSV sliders:

![HSVsliders.gif](https://files.gitter.im/urho3d/Urho3D/y4AK/HSVsliders.gif)

-------------------------

suppagam | 2019-08-21 15:45:02 UTC | #47

HSVA seem to be aligned to right, which effectively misaligns the labels. They should be aligned to middle or left.

-------------------------

Modanung | 2019-08-21 19:40:56 UTC | #48

Fixed! :wrench::slightly_smiling_face:

-------------------------

Modanung | 2019-08-26 00:00:22 UTC | #49

I set up a wiki for the project:
https://gitlab.com/luckeyproductions/manawarg/wikis/home

-------------------------

Modanung | 2019-08-26 19:16:24 UTC | #50

Materials and models can now be dragged from the _Resource Browser_ and dropped into the _Material Editor_ to either open the material or set a custom preview model.

![DragDropMatPreview|600x214](upload://5soxdp67yaL6rYhdClMumZJOn7Q.gif)

-------------------------

Modanung | 2019-08-27 13:25:28 UTC | #51

This now also works for scene files that are dropped onto a `SceneViewer`.

-------------------------

Modanung | 2019-08-28 14:41:06 UTC | #52

With the help of @Miegamicis the latest build of `ManaWarg/master/HEAD` can now be found on itch.  
https://luckeyproductions.itch.io/manawarg

-------------------------

Miegamicis | 2019-08-28 14:45:03 UTC | #53

CI/CD ftw! :sunglasses:

-------------------------

glitch-method | 2019-08-28 19:05:05 UTC | #54

this is so great. don't stop until it's perfect! üòÜ

-------------------------

Modanung | 2019-09-01 15:20:09 UTC | #55

I decided to change the default layout:
https://gitlab.com/luckeyproductions/manawarg/raw/master/Screenshot.png

-------------------------

elix22 | 2019-09-02 06:09:16 UTC | #56

Looks nice ,
However it won't work on Mac OS , since Qt on Mac is not compatible with SDL2.

> SDL_CreateWindowFrom()
This function expects NSWindow however Qt is passing NSView (in your case its `fishTrap->winId()`)

There were some attempts to modify SDL2 to support wxWidgets and Qt , one of them can be found  in 
https://github.com/flowercodec/sdl2

-------------------------

Modanung | 2019-09-02 06:32:49 UTC | #57

Thanks for pointing it out.
I do not have a Mac, but if anyone figures out a workaround, please do send a PR.

-------------------------

GoldenThumbs | 2019-09-27 03:50:22 UTC | #58

I have now learned the unending pain of trying to get this to work on Windows. Looks like I *may* be getting close to it though.

-------------------------

Zaroio | 2020-03-09 02:01:51 UTC | #59

So, is this dead? why? Urho's editor's horrible coming from godot

-------------------------

Modanung | 2020-03-14 01:40:34 UTC | #60

Not dead, hibernating. :shushing_face:

[quote="GoldenThumbs, post:58, topic:5403"]
I have now learned the unending pain of trying to get this to work on Windows.
[/quote]
Switching to Linux is probably easier. :smile:

-------------------------

dertom | 2020-03-09 09:17:51 UTC | #61

[quote="Zaroio, post:59, topic:5403"]
Urho‚Äôs editor‚Äôs horrible coming from godot
[/quote]
And you just came back to us? Or why are you here if GodotEditor was so much better?

-------------------------

bvanevery | 2020-03-09 12:52:33 UTC | #62

Maybe Zaroio is evaluating Urho3D.  Doesn't make them committed to it.

-------------------------

Zaroio | 2020-03-09 22:52:09 UTC | #63

I do like Urho better, already had a project with it. Wanna finish it.

-------------------------

Modanung | 2020-03-12 22:51:47 UTC | #64

New welcome screen:  

[![manawarg|690x388](upload://nJvaJl6AEqqMuUyjavvOVJPMa4A.png)](upload://nJvaJl6AEqqMuUyjavvOVJPMa4A.png)

And quite some less visible changes. :slightly_smiling_face:

-------------------------

George1 | 2020-03-13 00:31:06 UTC | #65

Looking sharp.
Maybe add script loading and reload function so we could change component behaviour on the fly :).

-------------------------

Eugene | 2020-03-13 11:30:23 UTC | #66

[quote="Zaroio, post:59, topic:5403"]
Urho‚Äôs editor‚Äôs horrible coming from godot
[/quote]
In some sense, Urho _has no editor_.
It is pretty much official position that `Editor.as` is basically advanced scripting example and was never intended to be an actual Editor in the same way as Godot/Unity/whatever.

-------------------------

Modanung | 2020-03-13 19:33:33 UTC | #67

In another sense Urho has a dozen - or so - editors, if you were to include the more specialized tools (for particles, terrain and materials), unfinished projects and Blender.

-------------------------

GodMan | 2020-03-14 03:41:24 UTC | #68

If this could be used for shader editing and extending this would be amazing.

-------------------------

SplinterGU | 2020-03-29 00:13:43 UTC | #69

Hi! Binaries don't works on last ubuntu. And your Qt-APPs freeze on last ubuntu... I tried Edddy and ManaWarg... I was tested with Example.edy project, and when I click on emp or ebs items the qt apps freeze... I did some debug, but I can't found solution... If I can do some test or give you some information for help to fix it, only ask me. Thanks.

-------------------------

Modanung | 2020-03-29 01:03:25 UTC | #70

The freezing is a [known issue](https://gitlab.com/luckeyproductions/manawarg/-/issues/1) and I'd love to see it resolved, but (un)fortunately I cannot reproduce it. This makes it hard to fix on my own, so your help would be very much appreciated. Please join the [gitter room](https://gitter.im/LucKeyProductions/ManaWarg) or reply to the issue on GitLab, so we might solve this problem.
Although I must first get some sleep.

-------------------------

SplinterGU | 2020-03-29 03:47:36 UTC | #71

I'll try help... thanks!

-------------------------

SplinterGU | 2020-04-05 08:06:18 UTC | #72

hello, me again, sorry for not using gitlab, but I don't know how to use it. I've been testing and researching, the freeze happens when glClear is executed (or other OpenGL operation like X11_GL_SwapWindow, this stuck on futex_wait_cancelable) after loading a project, or resize the window, or double-clicking the material editor. It seems to be something with QT (qt5?) And OpenGL on intelhd boards. Inside the driver it hangs in an xcb_wait_for_special_event. I don't know QT works internally, so I can't help too much. Maybe QT + OpenGL is not a good idea. I tried lot of things... I change all signals: for Q_SIGNAL, emit: for Q_EMIT, connect for QObject::connect and fix other bugs on Profiler.cpp in Dry (posible buffer overflow), but don't fix the problem. :'(
I must add if I close all views with opengl (Dry) it works... but freeze when I open a project because I can't close the main view.

-------------------------

Modanung | 2020-04-05 14:08:09 UTC | #73

I've been told QThreads may hold the solution.

-------------------------

SplinterGU | 2020-04-05 23:50:47 UTC | #74

thanks for reply! what is the patch that you suggest? I can test it.

-------------------------

Modanung | 2020-04-06 02:29:12 UTC | #75

I have no patch ready and - so far - also no experience with QThreads.

-------------------------

1vanK | 2020-04-09 05:38:31 UTC | #76

 https://www.qt.io/blog/qt-offering-changes-2020

> Long-term-supported (LTS) releases and the offline installer will become available to commercial licensees only

-------------------------

Modanung | 2020-04-09 12:12:00 UTC | #77

>  This means open-source users will receive patch-level releases of 5.15 until the next minor release will become available. This means that we will handle Qt 5.15 in the same way as e.g. 5.13 or 5.14 for open source users.

-------------------------

1vanK | 2020-04-09 13:04:40 UTC | #78

This means that they can do anything and change license at any time.

-------------------------

bvanevery | 2020-04-09 13:48:53 UTC | #79

Or does it mean their online installer is a kind of spyware, and that's their real interest?  I'm not researching this up, I don't care / won't use Qt.  But it's the first thing that springs to mind, when someone forces online interaction.  Maybe they "just" want "telemetry".

In principle, since it's open source, someone could write an offline installer.  In practice, I wonder who wants to do the work, and spend time fighting Qt?

-------------------------

Modanung | 2020-04-09 13:49:37 UTC | #80

[quote="bvanevery, post:79, topic:5403"]
Maybe they ‚Äújust‚Äù want ‚Äútelemetry‚Äù.
[/quote]

I'd assume anyone using Microsoft products doesn't really care about that.

-------------------------

bvanevery | 2020-04-09 13:51:20 UTC | #81

I was more interested in what the FLOSS crowd would care about.

-------------------------

Modanung | 2020-04-09 14:01:03 UTC | #82

Repository packages and the availability of source code, I guess. Not so much online/offline "installers".

-------------------------

bvanevery | 2020-04-09 18:13:08 UTC | #83

I tend to forget that Installers are more typically a Windows thing.  What does OSX do nowadays?  Do things just work by dragging folders around, no installation per se?

-------------------------

weitjong | 2020-04-10 09:12:37 UTC | #84

Please keep on the subject of the thread.

-------------------------

